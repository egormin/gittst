webpackJsonp(["users"],{"./users/calendar.js":function(t,e,r){"use strict";(function(t){var e=r("../../../node_modules/d3/d3.js"),i=r.n(e);(function(){this.Calendar=function(){function e(t,e){this.calendar_activities_path=e,this.clickDay=this.clickDay.bind(this),this.currentSelectedDate="",this.daySpace=1,this.daySize=15,this.daySizeWithSpace=this.daySize+2*this.daySpace,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.months=[],this.timestampsTmp=[];var r=0,i=new Date;i.setHours(0,0,0,0,0);var n=new Date(i);n.setFullYear(i.getFullYear()-1);for(var a=gl.utils.getDayDifference(n,i),s=0;s<=a;s+=1){var o=new Date(n);o.setDate(o.getDate()+s);var c=o.getDay(),u=t[o.format("yyyy-mm-dd")];(0===c&&0!==s||0===s)&&(this.timestampsTmp.push([]),r+=1);this.timestampsTmp[r-1].push({count:u||0,date:o,day:c})}this.colorKey=this.initColorKey(),this.color=this.initColor(),this.renderSvg(r),this.renderDays(),this.renderMonths(),this.renderDayTitles(),this.renderKey(),this.initTooltips()}return e.prototype.getExtraWidthPadding=function(t){var e=0;return this.timestampsTmp[t-1][0].date.getMonth()!=this.timestampsTmp[t-2][0].date.getMonth()&&(e=3),e},e.prototype.renderSvg=function(t){var e=(t+1)*this.daySizeWithSpace+this.getExtraWidthPadding(t);return this.svg=i.a.select(".js-contrib-calendar").append("svg").attr("width",e).attr("height",167).attr("class","contrib-calendar")},e.prototype.renderDays=function(){return this.svg.selectAll("g").data(this.timestampsTmp).enter().append("g").attr("transform",function(t){return function(e,r){return _.each(e,function(e,i){var n,a,s,o;if(0===i&&0===e.day){if(s=e.date.getMonth(),o=t.daySizeWithSpace*r+1+t.daySizeWithSpace,n=_.last(t.months),null!=n&&(a=n.x),null==n)return t.months.push({month:s,x:o});if(s!==n.month&&o-t.daySizeWithSpace!==a)return t.months.push({month:s,x:o})}}),"translate("+(t.daySizeWithSpace*r+1+t.daySizeWithSpace)+", 18)"}}(this)).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x","0").attr("y",function(t){return function(e,r){return t.daySizeWithSpace*e.day}}(this)).attr("width",this.daySize).attr("height",this.daySize).attr("title",function(t){return function(t){var e,r,i;return r=new Date(t.date),e="No contributions",t.count>0&&(e=t.count+" contribution"+(t.count>1?"s":"")),i=r.format("mmm d, yyyy"),e+"<br />"+gl.utils.getDayName(r)+" "+i}}()).attr("class","user-contrib-cell js-tooltip").attr("fill",function(t){return function(e){return 0!==e.count?t.color(Math.min(e.count,40)):"#ededed"}}(this)).attr("data-container","body").on("click",this.clickDay)},e.prototype.renderDayTitles=function(){var t;return t=[{text:"M",y:29+1*this.daySizeWithSpace},{text:"W",y:29+3*this.daySizeWithSpace},{text:"F",y:29+5*this.daySizeWithSpace}],this.svg.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("x",8).attr("y",function(t){return t.y}).text(function(t){return t.text}).attr("class","user-contrib-text")},e.prototype.renderMonths=function(){return this.svg.append("g").attr("direction","ltr").selectAll("text").data(this.months).enter().append("text").attr("x",function(t){return t.x}).attr("y",10).attr("class","user-contrib-text").text(function(t){return function(e){return t.monthNames[e.month]}}(this))},e.prototype.renderKey=function(){var t=this,e=["no contributions","1-9 contributions","10-19 contributions","20-29 contributions","30+ contributions"],r=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)];this.svg.append("g").attr("transform","translate(18, "+(8*this.daySizeWithSpace+16)+")").selectAll("rect").data(r).enter().append("rect").attr("width",this.daySize).attr("height",this.daySize).attr("x",function(e,r){return t.daySizeWithSpace*r}).attr("y",0).attr("fill",function(t){return t}).attr("class","js-tooltip").attr("title",function(t,r){return e[r]}).attr("data-container","body")},e.prototype.initColor=function(){var t;return t=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)],i.a.scale.threshold().domain([0,10,20,30]).range(t)},e.prototype.initColorKey=function(){return i.a.scale.linear().range(["#acd5f2","#254e77"]).domain([0,3])},e.prototype.clickDay=function(e){var r;return this.currentSelectedDate!==e.date?(this.currentSelectedDate=e.date,r=this.currentSelectedDate.getFullYear()+"-"+(this.currentSelectedDate.getMonth()+1)+"-"+this.currentSelectedDate.getDate(),t.ajax({url:this.calendar_activities_path,data:{date:r},cache:!1,dataType:"html",beforeSend:function(){return t(".user-calendar-activities").html('<div class="text-center"><i class="fa fa-spinner fa-spin user-calendar-activities-loading"></i></div>')},success:function(e){return t(".user-calendar-activities").html(e)}})):(this.currentSelectedDate="",t(".user-calendar-activities").html(""))},e.prototype.initTooltips=function(){return t(".js-contrib-calendar .js-tooltip").tooltip({html:!0})},e}()}).call(window)}).call(e,r("../../../node_modules/jquery/dist/jquery.js"))},"./users/users_bundle.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r("./users/calendar.js")}},["./users/users_bundle.js"]);
//# sourceMappingURL=users.2fbd5fa21db161cb22c1.bundle.js.map