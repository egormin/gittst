webpackJsonp(["boards"],{"../../../node_modules/vue-loader/lib/component-normalizer.js":function(e,s){e.exports=function(e,s,t,n){var i,o=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(i=e,o=e.default);var l="function"==typeof o?o.options:o;if(s&&(l.render=s.render,l.staticRenderFns=s.staticRenderFns),t&&(l._scopeId=t),n){var r=Object.create(l.computed||null);Object.keys(n).forEach(function(e){var s=n[e];r[e]=function(){return s}}),l.computed=r}return{esModule:i,exports:o,options:l}}},"../images/no_avatar.png":function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAAAAAAdJSU2AAACNElEQVR4AdXYBa7jMBCA4b3/JZahzIkjp2qt+BWUWnG5ln2XxaJJb2b5F2ukL4wvzK/rP7bUcbf92u6oftLSe1ldk8efsfaVeEjusZZeC6e1RllaCk/yG6ag1lZ4WwPX69uyD6tAe/g2ipAlNMRS37awDLaFrpcMWxXQOi0jnWCWjFkSZomYJWDWKmatYNZyEWkJsvQimoZYah5NgdaLxagCtF6GRy0DshZPkeYwS/KIJWGWYjwYUzDLxCwDtJ54OKglimBLqHWahii2g1pmHLLGBmwVoRjcKlmgOdw65H5qKuGWCVi5Qlhs6m1sENZi4q3AWNvca5UYy2RjT/SAsiZey6CsIvc0wVlV5lJ0ibPMyLUGCmlxQq0IM0hLdWyro7CWEc3sXsqaK4O2zLxOsmtpfW5Q1u68ZrVmepaaNXEewawtI9X5Xl3U3n1qND6+rfPzvqoIWz/fklNCSLY153YV53J/XUxGCJnKZ1lajsn3/Ffegf6Y5pV2LUsSNL2UHzxUfh3TlYpZqqTpXZm0KZk9zJcqaEmaWPHDw0pxe05K7bWOLHFLWXVetqpYmrjle4+1y0aBaF4UOQ1NU+lYezJClkjLUnSEjqhH6zjAW4OjtY39Ibq+sawUb6W2RQfoqG0VeKuwrRJvlba17faRdbe2pTtYq6Nty/S7yAbGsQjWIq41wVoT1+IdZNy1djUcVdu5lklQWC0xHkt1X31qNEE1Pr3qKv/9XiSNj6Aaifj3/69+AYujsR/MvkpZAAAAAElFTkSuQmCC"},"./boards/boards_bundle.js":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){var s=t("../../../node_modules/vue/dist/vue.esm.js"),n=t("../../../node_modules/vue-resource/dist/vue-resource.common.js"),i=t.n(n),o=t("./boards/filtered_search_boards.js"),a=t("./boards/eventhub.js"),l=(t("./boards/models/issue.js"),t("./boards/models/label.js")),r=(t.n(l),t("./boards/models/list.js"),t("./boards/models/milestone.js")),d=(t.n(r),t("./boards/models/assignee.js")),u=(t.n(d),t("./boards/stores/boards_store.js"),t("./boards/stores/modal_store.js")),c=(t.n(u),t("./boards/services/board_service.js"),t("./boards/mixins/modal_mixins.js")),h=(t.n(c),t("./boards/mixins/sortable_default_options.js")),f=(t.n(h),t("./boards/filters/due_date_filters.js"),t("./boards/components/board.js"),t("./boards/components/board_sidebar.js"),t("./boards/components/new_list_dropdown.js"));t.n(f),t("./boards/components/modal/index.js"),t("./vue_shared/vue_resource_interceptor.js");s.default.use(i.a),e(function(){var t=document.getElementById("board-app"),n=gl.issueBoards.BoardsStore,i=gl.issueBoards.ModalStore;window.gl=window.gl||{},gl.IssueBoardsApp&&gl.IssueBoardsApp.$destroy(!0),n.create(),gl.issueBoards.boardStoreIssueSet=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.default.set.apply(s.default,[n.detail.issue].concat(t))},gl.issueBoards.boardStoreIssueDelete=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.default.delete.apply(s.default,[n.detail.issue].concat(t))},gl.IssueBoardsApp=new s.default({el:t,components:{board:gl.issueBoards.Board,"board-sidebar":gl.issueBoards.BoardSidebar,"board-add-issues-modal":gl.issueBoards.IssuesModal},data:{state:n.state,loading:!0,endpoint:t.dataset.endpoint,boardId:t.dataset.boardId,disabled:"true"===t.dataset.disabled,issueLinkBase:t.dataset.issueLinkBase,rootPath:t.dataset.rootPath,bulkUpdatePath:t.dataset.bulkUpdatePath,detailIssue:n.detail,defaultAvatar:t.dataset.defaultAvatar},computed:{detailIssueVisible:function(){return Object.keys(this.detailIssue.issue).length}},created:function(){gl.boardService=new BoardService(this.endpoint,this.bulkUpdatePath,this.boardId),this.filterManager=new o.a(n.filter,!0),this.filterManager.setup(),a.a.$on("updateTokens",this.updateTokens)},beforeDestroy:function(){a.a.$off("updateTokens",this.updateTokens)},mounted:function(){var e=this;n.disabled=this.disabled,gl.boardService.all().then(function(s){s.json().forEach(function(s){var t=n.addList(s,e.defaultAvatar);"closed"===t.type?(t.position=1/0,t.label={description:"Shows all closed issues. Moving an issue to this list closes it"}):"backlog"===t.type&&(t.position=-1)}),e.state.lists=_.sortBy(e.state.lists,"position"),n.addBlankState(),e.loading=!1}).catch(function(){return new Flash("An error occurred. Please try again.")})},methods:{updateTokens:function(){this.filterManager.updateTokens()}}}),gl.IssueBoardsSearch=new s.default({el:document.getElementById("js-add-list"),data:{filters:n.state.filters},mounted:function(){gl.issueBoards.newListDropdownInit()}}),gl.IssueBoardsModalAddBtn=new s.default({mixins:[gl.issueBoards.ModalMixins],el:document.getElementById("js-add-issues-btn"),data:{modal:i.store,store:n.state},watch:{disabled:function(){this.updateTooltip()}},computed:{disabled:function(){return!this.store.lists.filter(function(e){return!e.preset}).length},tooltipTitle:function(){return this.disabled?"Please add a list to your board first":""}},methods:{updateTooltip:function(){var s=this,t=e(this.$el);this.$nextTick(function(){s.disabled?t.tooltip():t.tooltip("destroy")})},openModal:function(){this.disabled||this.toggleModal(!0)}},mounted:function(){this.updateTooltip()},template:'\n      <button\n        class="btn btn-create pull-right prepend-left-10"\n        type="button"\n        data-placement="bottom"\n        :class="{ \'disabled\': disabled }"\n        :title="tooltipTitle"\n        :aria-disabled="disabled"\n        @click="openModal">\n        Add issues\n      </button>\n    '})})}.call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/board.js":function(e,s,t){"use strict";(function(e){var s=t("../../../node_modules/vue/dist/vue.esm.js"),n=t("./lib/utils/accessor.js"),i=t("./boards/components/board_list.js"),o=t("./boards/components/board_blank_state.js"),a=(t("./boards/components/board_delete.js"),gl.issueBoards.BoardsStore);window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.Board=s.default.extend({template:"#js-board-template",components:{boardList:i.a,"board-delete":gl.issueBoards.BoardDelete,boardBlankState:o.a},props:{list:Object,disabled:Boolean,issueLinkBase:String,rootPath:String,boardId:{type:String,required:!0}},data:function(){return{detailIssue:a.detail,filter:a.filter}},watch:{filter:{handler:function(){this.list.page=1,this.list.getIssues(!0).catch(function(){})},deep:!0},detailIssue:{handler:function(){if(Object.keys(this.detailIssue.issue).length){if(this.list.findIssue(this.detailIssue.issue.id)){var s=this.$el.offsetLeft,t=document.querySelectorAll(".boards-list")[0],n=t.scrollLeft-s,i=s+this.$el.offsetWidth;window.innerWidth>768&&t.classList.contains("is-compact")?i-=t.offsetWidth-290:i-=t.offsetWidth,i-t.scrollLeft>0?e(t).animate({scrollLeft:i},this.sortableOptions.animation):n>0&&e(t).animate({scrollLeft:s},this.sortableOptions.animation)}}},deep:!0}},methods:{showNewIssueForm:function(){this.$refs["board-list"].showIssueForm=!this.$refs["board-list"].showIssueForm},toggleExpanded:function(e){this.list.isExpandable&&!e.target.classList.contains("js-no-trigger-collapse")&&(this.list.isExpanded=!this.list.isExpanded,n.a.isLocalStorageAccessSafe()&&localStorage.setItem("boards."+this.boardId+"."+this.list.type+".expanded",this.list.isExpanded))}},mounted:function(){var e=this;this.sortableOptions=gl.issueBoards.getBoardSortableDefaultOptions({disabled:this.disabled,group:"boards",draggable:".is-draggable",handle:".js-board-handle",onEnd:function(s){if(gl.issueBoards.onEnd(),void 0!==s.newIndex&&s.oldIndex!==s.newIndex){var t=e.sortable.toArray(),n=a.findList("id",parseInt(s.item.dataset.id,10));e.$nextTick(function(){a.moveList(n,t)})}}}),this.sortable=Sortable.create(this.$el.parentNode,this.sortableOptions)},created:function(){if(this.list.isExpandable&&n.a.isLocalStorageAccessSafe()){var e="false"===localStorage.getItem("boards."+this.boardId+"."+this.list.type+".expanded");this.list.isExpanded=!e}}})}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/board_blank_state.js":function(e,s,t){"use strict";var n=t("../../../node_modules/js-cookie/src/js.cookie.js"),i=t.n(n),o=gl.issueBoards.BoardsStore;s.a={template:'\n    <div class="board-blank-state">\n      <p>\n        Add the following default lists to your Issue Board with one click:\n      </p>\n      <ul class="board-blank-state-list">\n        <li v-for="label in predefinedLabels">\n          <span\n            class="label-color"\n            :style="{ backgroundColor: label.color }">\n          </span>\n          {{ label.title }}\n        </li>\n      </ul>\n      <p>\n        Starting out with the default set of lists will get you right on the way to making the most of your board.\n      </p>\n      <button\n        class="btn btn-create btn-inverted btn-block"\n        type="button"\n        @click.stop="addDefaultLists">\n        Add default lists\n      </button>\n      <button\n        class="btn btn-default btn-block"\n        type="button"\n        @click.stop="clearBlankState">\n        Nevermind, I\'ll use my own\n      </button>\n    </div>\n  ',data:function(){return{predefinedLabels:[new ListLabel({title:"To Do",color:"#F0AD4E"}),new ListLabel({title:"Doing",color:"#5CB85C"})]}},methods:{addDefaultLists:function(){this.clearBlankState(),this.predefinedLabels.forEach(function(e,s){o.addList({title:e.title,position:s,list_type:"label",label:{title:e.title,color:e.color}})}),o.state.lists=_.sortBy(o.state.lists,"position"),gl.boardService.generateDefaultLists().then(function(e){e.json().forEach(function(e){var s=o.findList("title",e.title);s.id=e.id,s.label.id=e.label.id,s.getIssues().catch(function(){})})}).catch(function(){o.removeList(void 0,"label"),i.a.remove("issue_board_welcome_hidden",{path:""}),o.addBlankState()})},clearBlankState:o.removeBlankState.bind(o)}}},"./boards/components/board_card.js":function(e,s,t){"use strict";var n=(t("./boards/components/issue_card_inner.js"),gl.issueBoards.BoardsStore);s.a={name:"BoardsIssueCard",template:'\n    <li class="card"\n      :class="{ \'user-can-drag\': !disabled && issue.id, \'is-disabled\': disabled || !issue.id, \'is-active\': issueDetailVisible }"\n      :index="index"\n      :data-issue-id="issue.id"\n      @mousedown="mouseDown"\n      @mousemove="mouseMove"\n      @mouseup="showIssue($event)">\n      <issue-card-inner\n        :list="list"\n        :issue="issue"\n        :issue-link-base="issueLinkBase"\n        :root-path="rootPath"\n        :update-filters="true" />\n    </li>\n  ',components:{"issue-card-inner":gl.issueBoards.IssueCardInner},props:{list:Object,issue:Object,issueLinkBase:String,disabled:Boolean,index:Number,rootPath:String},data:function(){return{showDetail:!1,detailIssue:n.detail}},computed:{issueDetailVisible:function(){return this.detailIssue.issue&&this.detailIssue.issue.id===this.issue.id}},methods:{mouseDown:function(){this.showDetail=!0},mouseMove:function(){this.showDetail=!1},showIssue:function(e){e.target.classList.contains("js-no-trigger")||this.showDetail&&(this.showDetail=!1,n.detail.issue&&n.detail.issue.id===this.issue.id?n.detail.issue={}:(n.detail.issue=this.issue,n.detail.list=this.list))}}}},"./boards/components/board_delete.js":function(e,s,t){"use strict";(function(e){var s=t("../../../node_modules/vue/dist/vue.esm.js");window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardDelete=s.default.extend({props:{list:Object},methods:{deleteBoard:function(){e(this.$el).tooltip("hide"),confirm("Are you sure you want to delete this list?")&&this.list.destroy()}}})}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/board_list.js":function(e,s,t){"use strict";var n=t("./boards/components/board_new_issue.js"),i=t("./boards/components/board_card.js"),o=t("./boards/eventhub.js"),a=t("./vue_shared/components/loading_icon.vue"),l=t.n(a),r=gl.issueBoards.BoardsStore;s.a={name:"BoardList",props:{disabled:{type:Boolean,required:!0},list:{type:Object,required:!0},issues:{type:Array,required:!0},loading:{type:Boolean,required:!0},issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0}},data:function(){return{scrollOffset:250,filters:r.state.filters,showCount:!1,showIssueForm:!1}},components:{boardCard:i.a,boardNewIssue:n.a,loadingIcon:l.a},methods:{listHeight:function(){return this.$refs.list.getBoundingClientRect().height},scrollHeight:function(){return this.$refs.list.scrollHeight},scrollTop:function(){return this.$refs.list.scrollTop+this.listHeight()},scrollToTop:function(){this.$refs.list.scrollTop=0},loadNextPage:function(){var e=this,s=this.list.nextPage(),t=function(){e.list.loadingMore=!1};s&&(this.list.loadingMore=!0,s.then(t).catch(t))},toggleForm:function(){this.showIssueForm=!this.showIssueForm},onScroll:function(){this.scrollTop()>this.scrollHeight()-this.scrollOffset&&!this.list.loadingMore&&this.loadNextPage()}},watch:{filters:{handler:function(){this.list.loadingMore=!1,this.$refs.list.scrollTop=0},deep:!0},issues:function(){var e=this;this.$nextTick(function(){e.scrollHeight()<=e.listHeight()&&e.list.issuesSize>e.list.issues.length&&(e.list.page+=1,e.list.getIssues(!1).catch(function(){})),e.scrollHeight()>Math.ceil(e.listHeight())?e.showCount=!0:e.showCount=!1})}},created:function(){o.a.$on("hide-issue-form-"+this.list.id,this.toggleForm),o.a.$on("scroll-board-list-"+this.list.id,this.scrollToTop)},mounted:function(){var e=this,s=gl.issueBoards.getBoardSortableDefaultOptions({scroll:document.querySelectorAll(".boards-list")[0],group:"issues",disabled:this.disabled,filter:".board-list-count, .is-disabled",dataIdAttr:"data-issue-id",onStart:function(s){var t=e.$refs.issue[s.oldIndex];t.showDetail=!1,r.moving.list=t.list,r.moving.issue=r.moving.list.findIssue(+s.item.dataset.issueId),gl.issueBoards.onStart()},onAdd:function(s){gl.issueBoards.BoardsStore.moveIssueToList(r.moving.list,e.list,r.moving.issue,s.newIndex),e.$nextTick(function(){s.item.remove()})},onUpdate:function(s){var t=e.sortable.toArray().filter(function(e){return"-1"!==e});gl.issueBoards.BoardsStore.moveIssueInList(e.list,r.moving.issue,s.oldIndex,s.newIndex,t)},onMove:function(e){return!e.related.classList.contains("board-list-count")}});this.sortable=Sortable.create(this.$refs.list,s),this.$refs.list.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){o.a.$off("hide-issue-form-"+this.list.id,this.toggleForm),o.a.$off("scroll-board-list-"+this.list.id,this.scrollToTop),this.$refs.list.removeEventListener("scroll",this.onScroll)},template:'\n    <div class="board-list-component">\n      <div\n        class="board-list-loading text-center"\n        aria-label="Loading issues"\n        v-if="loading">\n        <loading-icon />\n      </div>\n      <transition name="slide-down">\n        <board-new-issue\n          :list="list"\n          v-if="list.type !== \'closed\' && showIssueForm"/>\n      </transition>\n      <ul\n        class="board-list"\n        v-show="!loading"\n        ref="list"\n        :data-board="list.id"\n        :class="{ \'is-smaller\': showIssueForm }">\n        <board-card\n          v-for="(issue, index) in issues"\n          ref="issue"\n          :index="index"\n          :list="list"\n          :issue="issue"\n          :issue-link-base="issueLinkBase"\n          :root-path="rootPath"\n          :disabled="disabled"\n          :key="issue.id" />\n        <li\n          class="board-list-count text-center"\n          v-if="showCount"\n          data-id="-1">\n\n          <loading-icon\n            v-show="list.loadingMore"\n            label="Loading more issues"\n            />\n\n          <span v-if="list.issues.length === list.issuesSize">\n            Showing all issues\n          </span>\n          <span v-else>\n            Showing {{ list.issues.length }} of {{ list.issuesSize }} issues\n          </span>\n        </li>\n      </ul>\n    </div>\n  '}},"./boards/components/board_new_issue.js":function(e,s,t){"use strict";(function(e){var n=t("./boards/eventhub.js"),i=gl.issueBoards.BoardsStore;s.a={name:"BoardNewIssue",props:{list:Object},data:function(){return{title:"",error:!1}},methods:{submit:function(s){var t=this;if(s.preventDefault(),""!==this.title.trim()){this.error=!1;var o=this.list.label?[this.list.label]:[],a=new ListIssue({title:this.title,labels:o,subscribed:!0,assignees:[]});this.list.newIssue(a).then(function(){e(t.$refs.submitButton).enable(),i.detail.issue=a,i.detail.list=t.list}).catch(function(){e(t.$refs.submitButton).enable(),t.list.removeIssue(a),t.error=!0}),n.a.$emit("scroll-board-list-"+this.list.id),this.cancel()}},cancel:function(){this.title="",n.a.$emit("hide-issue-form-"+this.list.id)}},mounted:function(){this.$refs.input.focus()},template:'\n    <div class="card board-new-issue-form">\n      <form @submit="submit($event)">\n        <div class="flash-container"\n          v-if="error">\n          <div class="flash-alert">\n            An error occured. Please try again.\n          </div>\n        </div>\n        <label class="label-light"\n          :for="list.id + \'-title\'">\n          Title\n        </label>\n        <input class="form-control"\n          type="text"\n          v-model="title"\n          ref="input"\n          autocomplete="off"\n          :id="list.id + \'-title\'" />\n        <div class="clearfix prepend-top-10">\n          <button class="btn btn-success pull-left"\n            type="submit"\n            :disabled="title === \'\'"\n            ref="submit-button">\n            Submit issue\n          </button>\n          <button class="btn btn-default pull-right"\n            type="button"\n            @click="cancel">\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  '}}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/board_sidebar.js":function(e,s,t){"use strict";(function(e){var s=t("../../../node_modules/vue/dist/vue.esm.js"),n=t("./sidebar/event_hub.js"),i=t("./sidebar/components/assignees/assignee_title.js"),o=t("./sidebar/components/assignees/assignees.js"),a=(t("./boards/components/sidebar/remove_issue.js"),gl.issueBoards.BoardsStore);window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardSidebar=s.default.extend({props:{currentUser:Object},data:function(){return{detail:a.detail,issue:{},list:{},loadingAssignees:!1}},computed:{showSidebar:function(){return Object.keys(this.issue).length},assigneeId:function(){return this.issue.assignee?this.issue.assignee.id:0},milestoneTitle:function(){return this.issue.milestone?this.issue.milestone.title:"No Milestone"}},watch:{detail:{handler:function(){var s=this;this.issue.id!==this.detail.issue.id&&(e(".block.assignee").find('input:not(.js-vue)[name="issue[assignee_ids][]"]').each(function(s,t){e(t).remove()}),e(".js-issue-board-sidebar",this.$el).each(function(s,t){e(t).data("glDropdown").clearMenu()})),this.issue=this.detail.issue,this.list=this.detail.list,this.$nextTick(function(){s.endpoint=s.$refs.assigneeDropdown.dataset.issueUpdate})},deep:!0}},methods:{closeSidebar:function(){this.detail.issue={}},assignSelf:function(){this.$refs.assigneeBlock.dispatchEvent(new Event("assignYourself")),this.addAssignee(this.currentUser),this.saveAssignees()},removeAssignee:function(e){gl.issueBoards.BoardsStore.detail.issue.removeAssignee(e)},addAssignee:function(e){gl.issueBoards.BoardsStore.detail.issue.addAssignee(e)},removeAllAssignees:function(){gl.issueBoards.BoardsStore.detail.issue.removeAllAssignees()},saveAssignees:function(){var e=this;this.loadingAssignees=!0,gl.issueBoards.BoardsStore.detail.issue.update(this.endpoint).then(function(){e.loadingAssignees=!1}).catch(function(){return e.loadingAssignees=!1,new Flash("An error occurred while saving assignees")})}},created:function(){n.a.$on("sidebar.removeAssignee",this.removeAssignee),n.a.$on("sidebar.addAssignee",this.addAssignee),n.a.$on("sidebar.removeAllAssignees",this.removeAllAssignees),n.a.$on("sidebar.saveAssignees",this.saveAssignees)},beforeDestroy:function(){n.a.$off("sidebar.removeAssignee",this.removeAssignee),n.a.$off("sidebar.addAssignee",this.addAssignee),n.a.$off("sidebar.removeAllAssignees",this.removeAllAssignees),n.a.$off("sidebar.saveAssignees",this.saveAssignees)},mounted:function(){new IssuableContext(this.currentUser),new MilestoneSelect,new gl.DueDateSelectors,new LabelsSelect,new Sidebar,gl.Subscription.bindAll(".subscription")},components:{removeBtn:gl.issueBoards.RemoveIssueBtn,"assignee-title":i.a,assignees:o.a}})}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/issue_card_inner.js":function(e,s,t){"use strict";(function(e){var s=t("../../../node_modules/vue/dist/vue.esm.js"),n=t("./vue_shared/components/user_avatar/user_avatar_link.vue"),i=t.n(n),o=t("./boards/eventhub.js"),a=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.IssueCardInner=s.default.extend({props:{issue:{type:Object,required:!0},issueLinkBase:{type:String,required:!0},list:{type:Object,required:!1,default:function(){return{}}},rootPath:{type:String,required:!0},updateFilters:{type:Boolean,required:!1,default:!1}},data:function(){return{limitBeforeCounter:3,maxRender:4,maxCounter:99}},components:{userAvatarLink:i.a},computed:{numberOverLimit:function(){return this.issue.assignees.length-this.limitBeforeCounter},assigneeCounterTooltip:function(){return this.assigneeCounterLabel+" more"},assigneeCounterLabel:function(){return this.numberOverLimit>this.maxCounter?this.maxCounter+"+":"+"+this.numberOverLimit},shouldRenderCounter:function(){return!(this.issue.assignees.length<=this.maxRender)&&this.issue.assignees.length>this.numberOverLimit},cardUrl:function(){return this.issueLinkBase+"/"+this.issue.id},issueId:function(){return"#"+this.issue.id},showLabelFooter:function(){var e=this;return void 0!==this.issue.labels.find(function(s){return e.showLabel(s)})}},methods:{isIndexLessThanlimit:function(e){return e<this.limitBeforeCounter},shouldRenderAssignee:function(e){return this.issue.assignees.length<=this.maxRender?e<this.maxRender:e<this.limitBeforeCounter},assigneeUrl:function(e){return""+this.rootPath+e.username},assigneeUrlTitle:function(e){return"Assigned to "+e.name},avatarUrlTitle:function(e){return"Avatar for "+e.name},showLabel:function(e){return!this.list||(!this.list.label||e.id!==this.list.label.id)},filterByLabel:function(s,t){if(this.updateFilters){var n=gl.issueBoards.BoardsStore.filter.path.split("&"),i=encodeURIComponent(s.title),l="label_name[]="+i,r=n.indexOf(l);e(t.currentTarget).tooltip("hide"),-1===r?n.push(l):n.splice(r,1),gl.issueBoards.BoardsStore.filter.path=n.join("&"),a.updateFiltersUrl(),o.a.$emit("updateTokens")}},labelStyle:function(e){return{backgroundColor:e.color,color:e.textColor}}},template:'\n    <div>\n      <div class="card-header">\n        <h4 class="card-title">\n          <i\n            class="fa fa-eye-slash confidential-icon"\n            v-if="issue.confidential"\n            aria-hidden="true"\n          />\n          <a\n            class="js-no-trigger"\n            :href="cardUrl"\n            :title="issue.title">{{ issue.title }}</a>\n          <span\n            class="card-number"\n            v-if="issue.id"\n          >\n            {{ issueId }}\n          </span>\n        </h4>\n        <div class="card-assignee">\n          <user-avatar-link\n            v-for="(assignee, index) in issue.assignees"\n            :key="assignee.id"\n            v-if="shouldRenderAssignee(index)"\n            class="js-no-trigger"\n            :link-href="assigneeUrl(assignee)"\n            :img-alt="avatarUrlTitle(assignee)"\n            :img-src="assignee.avatar"\n            :tooltip-text="assigneeUrlTitle(assignee)"\n            tooltip-placement="bottom"\n          />\n          <span\n            class="avatar-counter has-tooltip"\n            :title="assigneeCounterTooltip"\n            v-if="shouldRenderCounter"\n          >\n           {{ assigneeCounterLabel }}\n          </span>\n        </div>\n      </div>\n      <div\n        class="card-footer"\n        v-if="showLabelFooter"\n      >\n        <button\n          class="label color-label has-tooltip"\n          v-for="label in issue.labels"\n          type="button"\n          v-if="showLabel(label)"\n          @click="filterByLabel(label, $event)"\n          :style="labelStyle(label)"\n          :title="label.description"\n          data-container="body">\n          {{ label.title }}\n        </button>\n      </div>\n    </div>\n  '})}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/modal/empty_state.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=gl.issueBoards.ModalStore;gl.issueBoards.ModalEmptyState=n.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return i.store},props:{image:{type:String,required:!0},newIssuePath:{type:String,required:!0}},computed:{contents:function(){var e={title:"You haven't added any issues to your project yet",content:"\n          An issue can be a bug, a todo or a feature request that needs to be\n          discussed in a project. Besides, issues are searchable and filterable.\n        "};return"selected"===this.activeTab&&(e.title="You haven't selected any issues yet",e.content="\n          Go back to <strong>Open issues</strong> and select some issues\n          to add to your board.\n        "),e}},template:'\n    <section class="empty-state">\n      <div class="row">\n        <div class="col-xs-12 col-sm-6 col-sm-push-6">\n          <aside class="svg-content" v-html="image"></aside>\n        </div>\n        <div class="col-xs-12 col-sm-6 col-sm-pull-6">\n          <div class="text-content">\n            <h4>{{ contents.title }}</h4>\n            <p v-html="contents.content"></p>\n            <a\n              :href="newIssuePath"\n              class="btn btn-success btn-inverted"\n              v-if="activeTab === \'all\'">\n              New issue\n            </a>\n            <button\n              type="button"\n              class="btn btn-default"\n              @click="changeTab(\'all\')"\n              v-if="activeTab === \'selected\'">\n              Open issues\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n  '})},"./boards/components/modal/filters.js":function(e,s,t){"use strict";var n=t("./boards/filtered_search_boards.js"),i=t("./filtered_search/container.js");s.a={name:"modal-filters",props:{store:{type:Object,required:!0}},mounted:function(){i.a.container=this.$el,this.filteredSearch=new n.a(this.store),this.filteredSearch.setup(),this.filteredSearch.removeTokens(),this.filteredSearch.handleInputPlaceholder(),this.filteredSearch.toggleClearSearchButton()},destroyed:function(){this.filteredSearch.cleanup(),i.a.container=document,this.store.path=""},template:"#js-board-modal-filter"}},"./boards/components/modal/footer.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=(t("./boards/components/modal/lists_dropdown.js"),gl.issueBoards.ModalStore);gl.issueBoards.ModalFooter=n.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return{modal:i.store,state:gl.issueBoards.BoardsStore.state}},computed:{submitDisabled:function(){return!i.selectedCount()},submitText:function(){var e=i.selectedCount();return"Add "+(e>0?e:"")+" "+gl.text.pluralize("issue",e)}},methods:{addIssues:function(){var e=this.modal.selectedList||this.state.lists[1],s=i.getSelectedIssues(),t=s.map(function(e){return e.globalId});gl.boardService.bulkUpdate(t,{add_label_ids:[e.label.id]}).catch(function(){new Flash("Failed to update issues, please try again.","alert"),s.forEach(function(s){e.removeIssue(s),e.issuesSize-=1})}),s.forEach(function(s){e.addIssue(s),e.issuesSize+=1}),this.toggleModal(!1)}},components:{"lists-dropdown":gl.issueBoards.ModalFooterListsDropdown},template:'\n    <footer\n      class="form-actions add-issues-footer">\n      <div class="pull-left">\n        <button\n          class="btn btn-success"\n          type="button"\n          :disabled="submitDisabled"\n          @click="addIssues">\n          {{ submitText }}\n        </button>\n        <span class="inline add-issues-footer-to-list">\n          to list\n        </span>\n        <lists-dropdown></lists-dropdown>\n      </div>\n      <button\n        class="btn btn-default pull-right"\n        type="button"\n        @click="toggleModal(false)">\n        Cancel\n      </button>\n    </footer>\n  '})},"./boards/components/modal/header.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=t("./boards/components/modal/filters.js"),o=(t("./boards/components/modal/tabs.js"),gl.issueBoards.ModalStore);gl.issueBoards.ModalHeader=n.default.extend({mixins:[gl.issueBoards.ModalMixins],props:{projectId:{type:Number,required:!0},milestonePath:{type:String,required:!0},labelPath:{type:String,required:!0}},data:function(){return o.store},computed:{selectAllText:function(){return o.selectedCount()!==this.issues.length||0===this.issues.length?"Select all":"Deselect all"},showSearch:function(){return"all"===this.activeTab&&!this.loading&&this.issuesCount>0}},methods:{toggleAll:function(){this.$refs.selectAllBtn.blur(),o.toggleAll()}},components:{"modal-tabs":gl.issueBoards.ModalTabs,modalFilters:i.a},template:'\n    <div>\n      <header class="add-issues-header form-actions">\n        <h2>\n          Add issues\n          <button\n            type="button"\n            class="close"\n            data-dismiss="modal"\n            aria-label="Close"\n            @click="toggleModal(false)">\n            <span aria-hidden="true">Ã—</span>\n          </button>\n        </h2>\n      </header>\n      <modal-tabs v-if="!loading && issuesCount > 0"></modal-tabs>\n      <div\n        class="add-issues-search append-bottom-10"\n        v-if="showSearch">\n        <modal-filters :store="filter" />\n        <button\n          type="button"\n          class="btn btn-success btn-inverted prepend-left-10"\n          ref="selectAllBtn"\n          @click="toggleAll">\n          {{ selectAllText }}\n        </button>\n      </div>\n    </div>\n  '})},"./boards/components/modal/index.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=t("./boards/utils/query_data.js"),o=t("./vue_shared/components/loading_icon.vue"),a=t.n(o),l=(t("./boards/components/modal/header.js"),t("./boards/components/modal/list.js"),t("./boards/components/modal/footer.js"),t("./boards/components/modal/empty_state.js"),gl.issueBoards.ModalStore);gl.issueBoards.IssuesModal=n.default.extend({props:{blankStateImage:{type:String,required:!0},newIssuePath:{type:String,required:!0},issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0},projectId:{type:Number,required:!0},milestonePath:{type:String,required:!0},labelPath:{type:String,required:!0}},data:function(){return l.store},watch:{page:function(){this.loadIssues()},showAddIssuesModal:function(){var e=this;if(this.showAddIssuesModal&&!this.issues.length){this.loading=!0;var s=function(){e.loading=!1};this.loadIssues().then(s).catch(s)}else this.showAddIssuesModal||(this.issues=[],this.selectedIssues=[],this.issuesCount=!1)},filter:{handler:function(){var e=this;if(this.$el.tagName){this.page=1,this.filterLoading=!0;var s=function(){e.filterLoading=!1};this.loadIssues(!0).then(s).catch(s)}},deep:!0}},methods:{loadIssues:function(){var e=this,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!this.showAddIssuesModal&&gl.boardService.getBacklog(t.i(i.a)(this.filter.path,{page:this.page,per:this.perPage})).then(function(t){var n=t.json();s&&(e.issues=[]),n.issues.forEach(function(s){var t=new ListIssue(s),n=l.findSelectedIssue(t);t.selected=!!n,e.issues.push(t)}),e.loadingNewPage=!1,e.issuesCount||(e.issuesCount=n.size)}).catch(function(){})}},computed:{showList:function(){return"selected"===this.activeTab?this.selectedIssues.length>0:this.issuesCount>0},showEmptyState:function(){return!this.loading&&0===this.issuesCount||"selected"===this.activeTab&&0===this.selectedIssues.length}},created:function(){this.page=1},components:{"modal-header":gl.issueBoards.ModalHeader,"modal-list":gl.issueBoards.ModalList,"modal-footer":gl.issueBoards.ModalFooter,"empty-state":gl.issueBoards.ModalEmptyState,loadingIcon:a.a},template:'\n    <div\n      class="add-issues-modal"\n      v-if="showAddIssuesModal">\n      <div class="add-issues-container">\n        <modal-header\n          :project-id="projectId"\n          :milestone-path="milestonePath"\n          :label-path="labelPath">\n        </modal-header>\n        <modal-list\n          :image="blankStateImage"\n          :issue-link-base="issueLinkBase"\n          :root-path="rootPath"\n          v-if="!loading && showList && !filterLoading"></modal-list>\n        <empty-state\n          v-if="showEmptyState"\n          :image="blankStateImage"\n          :new-issue-path="newIssuePath"></empty-state>\n        <section\n          class="add-issues-list text-center"\n          v-if="loading || filterLoading">\n          <div class="add-issues-list-loading">\n            <loading-icon />\n          </div>\n        </section>\n        <modal-footer></modal-footer>\n      </div>\n    </div>\n  '})},"./boards/components/modal/list.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=gl.issueBoards.ModalStore;gl.issueBoards.ModalList=n.default.extend({props:{issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0},image:{type:String,required:!0}},data:function(){return i.store},watch:{activeTab:function(){"all"===this.activeTab&&i.purgeUnselectedIssues()}},computed:{loopIssues:function(){return"all"===this.activeTab?this.issues:this.selectedIssues},groupedIssues:function(){var e=this,s=[];return this.loopIssues.forEach(function(t,n){var i=n%e.columns;s[i]||s.push([]),s[i].push(t)}),s}},methods:{scrollHandler:function(){var e=Math.floor(this.issues.length/this.perPage);this.scrollTop()>this.scrollHeight()-100&&!this.loadingNewPage&&e===this.page&&(this.loadingNewPage=!0,this.page+=1)},toggleIssue:function(e,s){"A"!==e.target.tagName&&i.toggleIssue(s)},listHeight:function(){return this.$refs.list.getBoundingClientRect().height},scrollHeight:function(){return this.$refs.list.scrollHeight},scrollTop:function(){return this.$refs.list.scrollTop+this.listHeight()},showIssue:function(e){return"all"===this.activeTab||-1!==i.selectedIssueIndex(e)},setColumnCount:function(){var e=bp.getBreakpointSize();this.columns="lg"===e||"md"===e?3:"sm"===e?2:1}},mounted:function(){this.scrollHandlerWrapper=this.scrollHandler.bind(this),this.setColumnCountWrapper=this.setColumnCount.bind(this),this.setColumnCount(),this.$refs.list.addEventListener("scroll",this.scrollHandlerWrapper),window.addEventListener("resize",this.setColumnCountWrapper)},beforeDestroy:function(){this.$refs.list.removeEventListener("scroll",this.scrollHandlerWrapper),window.removeEventListener("resize",this.setColumnCountWrapper)},components:{"issue-card-inner":gl.issueBoards.IssueCardInner},template:'\n    <section\n      class="add-issues-list add-issues-list-columns"\n      ref="list">\n      <div\n        class="empty-state add-issues-empty-state-filter text-center"\n        v-if="issuesCount > 0 && issues.length === 0">\n        <div\n          class="svg-content"\n          v-html="image">\n        </div>\n        <div class="text-content">\n          <h4>\n            There are no issues to show.\n          </h4>\n        </div>\n      </div>\n      <div\n        v-for="group in groupedIssues"\n        class="add-issues-list-column">\n        <div\n          v-for="issue in group"\n          v-if="showIssue(issue)"\n          class="card-parent">\n          <div\n            class="card"\n            :class="{ \'is-active\': issue.selected }"\n            @click="toggleIssue($event, issue)">\n            <issue-card-inner\n              :issue="issue"\n              :issue-link-base="issueLinkBase"\n              :root-path="rootPath">\n            </issue-card-inner>\n            <span\n              :aria-label="\'Issue #\' + issue.id + \' selected\'"\n              aria-checked="true"\n              v-if="issue.selected"\n              class="issue-card-selected text-center">\n              <i class="fa fa-check"></i>\n            </span>\n          </div>\n        </div>\n      </div>\n    </section>\n  '})},"./boards/components/modal/lists_dropdown.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=gl.issueBoards.ModalStore;gl.issueBoards.ModalFooterListsDropdown=n.default.extend({data:function(){return{modal:i.store,state:gl.issueBoards.BoardsStore.state}},computed:{selected:function(){return this.modal.selectedList||this.state.lists[1]}},destroyed:function(){this.modal.selectedList=null},template:'\n    <div class="dropdown inline">\n      <button\n        class="dropdown-menu-toggle"\n        type="button"\n        data-toggle="dropdown"\n        aria-expanded="false">\n        <span\n          class="dropdown-label-box"\n          :style="{ backgroundColor: selected.label.color }">\n        </span>\n        {{ selected.title }}\n        <i class="fa fa-chevron-down"></i>\n      </button>\n      <div class="dropdown-menu dropdown-menu-selectable dropdown-menu-drop-up">\n        <ul>\n          <li\n            v-for="list in state.lists"\n            v-if="list.type == \'label\'">\n            <a\n              href="#"\n              role="button"\n              :class="{ \'is-active\': list.id == selected.id }"\n              @click.prevent="modal.selectedList = list">\n              <span\n                class="dropdown-label-box"\n                :style="{ backgroundColor: list.label.color }">\n              </span>\n              {{ list.title }}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  '})},"./boards/components/modal/tabs.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=gl.issueBoards.ModalStore;gl.issueBoards.ModalTabs=n.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return i.store},computed:{selectedCount:function(){return i.selectedCount()}},destroyed:function(){this.activeTab="all"},template:'\n    <div class="top-area prepend-top-10 append-bottom-10">\n      <ul class="nav-links issues-state-filters">\n        <li :class="{ \'active\': activeTab == \'all\' }">\n          <a\n            href="#"\n            role="button"\n            @click.prevent="changeTab(\'all\')">\n            Open issues\n            <span class="badge">\n              {{ issuesCount }}\n            </span>\n          </a>\n        </li>\n        <li :class="{ \'active\': activeTab == \'selected\' }">\n          <a\n            href="#"\n            role="button"\n            @click.prevent="changeTab(\'selected\')">\n            Selected issues\n            <span class="badge">\n              {{ selectedCount }}\n            </span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  '})},"./boards/components/new_list_dropdown.js":function(e,s,t){(function(e){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{};var s=gl.issueBoards.BoardsStore;e(document).off("created.label").on("created.label",function(e,t){s.new({title:t.title,position:s.state.lists.length-2,list_type:"label",label:{id:t.id,title:t.title,color:t.color}})}),gl.issueBoards.newListDropdownInit=function(){e(".js-new-board-list").each(function(){var t=e(this);new gl.CreateLabelDropdown(t.closest(".dropdown").find(".dropdown-new-label"),t.data("namespace-path"),t.data("project-path")),t.glDropdown({data:function(s,n){e.get(t.attr("data-labels")).then(function(e){n(e)})},renderRow:function(t){var n=s.findList("title",t.title),i=e("<li />"),o=e("<a />",{class:n?"is-active js-board-list-"+n.id:"",text:t.title,href:"#"}),a=e("<span />",{class:"dropdown-label-box",style:"background-color: "+t.color});return i.append(o.prepend(a))},search:{fields:["title"]},filterable:!0,selectable:!0,multiSelect:!0,clicked:function(e){var t=e.e,n=e.selectedObj;t.preventDefault(),s.findList("title",n.title)||(s.new({title:n.title,position:s.state.lists.length-2,list_type:"label",label:{id:n.id,title:n.title,color:n.color}}),s.state.lists=_.sortBy(s.state.lists,"position"))}})})}}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/components/sidebar/remove_issue.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.RemoveIssueBtn=n.default.extend({props:{issue:{type:Object,required:!0},list:{type:Object,required:!0}},methods:{removeIssue:function(){var e=this.issue,s=e.getLists(),t=s.map(function(e){return e.label.id});gl.boardService.bulkUpdate([e.globalId],{remove_label_ids:t}).catch(function(){new Flash("Failed to remove issue from board, please try again.","alert"),s.forEach(function(s){s.addIssue(e)})}),s.forEach(function(s){s.removeIssue(e)}),i.detail.issue={}}},template:'\n    <div\n      class="block list"\n      v-if="list.type !== \'closed\'">\n      <button\n        class="btn btn-default btn-block"\n        type="button"\n        @click="removeIssue">\n        Remove from board\n      </button>\n    </div>\n  '})},"./boards/eventhub.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js");s.a=new n.default},"./boards/filtered_search_boards.js":function(e,s,t){"use strict";function n(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function i(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?e:s}function o(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}var a=t("./filtered_search/container.js"),l=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}(),r=function(e){function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n(this,s);var a=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"boards"));return a.store=e,a.updateUrl=t,a.isHandledAsync=!0,a.cantEdit=o,a}return o(s,e),l(s,[{key:"updateObject",value:function(e){this.store.path=e.substr(1),this.updateUrl&&gl.issueBoards.BoardsStore.updateFiltersUrl()}},{key:"removeTokens",value:function(){var e=a.a.container.querySelectorAll(".js-visual-token");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),this.filteredSearchInput.value=""}},{key:"updateTokens",value:function(){this.removeTokens(),this.loadSearchParamsFromURL(),this.filteredSearchInput.dispatchEvent(new Event("input"))}},{key:"canEdit",value:function(e){return-1===this.cantEdit.indexOf(e)}}]),s}(gl.FilteredSearchManager);s.a=r},"./boards/filters/due_date_filters.js":function(e,s,t){"use strict";t("../../../node_modules/vue/dist/vue.esm.js").default.filter("due-date",function(e){var s=new Date(e);return dateFormat(s,"mmm d, yyyy",!0)})},"./boards/mixins/modal_mixins.js":function(e,s){var t=gl.issueBoards.ModalStore;gl.issueBoards.ModalMixins={methods:{toggleModal:function(e){t.store.showAddIssuesModal=e},changeTab:function(e){t.store.activeTab=e}}}},"./boards/mixins/sortable_default_options.js":function(e,s,t){(function(e){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.onStart=function(){e(".has-tooltip").tooltip("hide").tooltip("disable"),document.body.classList.add("is-dragging")},gl.issueBoards.onEnd=function(){e(".has-tooltip").tooltip("enable"),document.body.classList.remove("is-dragging")},gl.issueBoards.touchEnabled="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,gl.issueBoards.getBoardSortableDefaultOptions=function(e){var s={animation:200,forceFallback:!0,fallbackClass:"is-dragging",fallbackOnBody:!0,ghostClass:"is-ghost",filter:".board-delete, .btn",delay:gl.issueBoards.touchEnabled?100:0,scrollSensitivity:gl.issueBoards.touchEnabled?60:100,scrollSpeed:20,onStart:gl.issueBoards.onStart,onEnd:gl.issueBoards.onEnd};return Object.keys(e).forEach(function(t){s[t]=e[t]}),s}}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/models/assignee.js":function(e,s){function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var n=function e(s,n){t(this,e),this.id=s.id,this.name=s.name,this.username=s.username,this.avatar=s.avatar_url||n};window.ListAssignee=n},"./boards/models/issue.js":function(e,s,t){"use strict";function n(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var i=t("../../../node_modules/vue/dist/vue.esm.js"),o=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}(),a=function(){function e(s,t){var i=this;n(this,e),this.globalId=s.id,this.id=s.iid,this.title=s.title,this.confidential=s.confidential,this.dueDate=s.due_date,this.subscribed=s.subscribed,this.labels=[],this.assignees=[],this.selected=!1,this.position=s.relative_position||1/0,s.milestone&&(this.milestone=new ListMilestone(s.milestone)),s.labels.forEach(function(e){i.labels.push(new ListLabel(e))}),this.assignees=s.assignees.map(function(e){return new ListAssignee(e,t)})}return o(e,[{key:"addLabel",value:function(e){this.findLabel(e)||this.labels.push(new ListLabel(e))}},{key:"findLabel",value:function(e){return this.labels.filter(function(s){return s.title===e.title})[0]}},{key:"removeLabel",value:function(e){e&&(this.labels=this.labels.filter(function(s){return e.title!==s.title}))}},{key:"removeLabels",value:function(e){e.forEach(this.removeLabel.bind(this))}},{key:"addAssignee",value:function(e){this.findAssignee(e)||this.assignees.push(new ListAssignee(e))}},{key:"findAssignee",value:function(e){return this.assignees.filter(function(s){return s.id===e.id})[0]}},{key:"removeAssignee",value:function(e){e&&(this.assignees=this.assignees.filter(function(s){return s.id!==e.id}))}},{key:"removeAllAssignees",value:function(){this.assignees=[]}},{key:"getLists",value:function(){var e=this;return gl.issueBoards.BoardsStore.state.lists.filter(function(s){return s.findIssue(e.id)})}},{key:"update",value:function(e){var s={issue:{milestone_id:this.milestone?this.milestone.id:null,due_date:this.dueDate,assignee_ids:this.assignees.length>0?this.assignees.map(function(e){return e.id}):[0],label_ids:this.labels.map(function(e){return e.id})}};return s.issue.label_ids.length||(s.issue.label_ids=[""]),i.default.http.patch(e,s)}}]),e}();window.ListIssue=a},"./boards/models/label.js":function(e,s){function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var n=function e(s){t(this,e),this.id=s.id,this.title=s.title,this.color=s.color,this.textColor=s.text_color,this.description=s.description,this.priority=null!==s.priority?s.priority:1/0};window.ListLabel=n},"./boards/models/list.js":function(e,s,t){"use strict";function n(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var i=t("./boards/utils/query_data.js"),o=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}(),a=function(){function e(s,t){n(this,e),this.id=s.id,this._uid=this.guid(),this.position=s.position,this.title=s.title,this.type=s.list_type,this.preset=["backlog","closed","blank"].indexOf(this.type)>-1,this.isExpandable=["backlog","closed"].indexOf(this.type)>-1,this.isExpanded=!0,this.page=1,this.loading=!0,this.loadingMore=!1,this.issues=[],this.issuesSize=0,this.defaultAvatar=t,s.label&&(this.label=new ListLabel(s.label)),"blank"!==this.type&&this.id&&this.getIssues().catch(function(){})}return o(e,[{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"save",value:function(){var e=this;return gl.boardService.createList(this.label.id).then(function(s){var t=s.json();return e.id=t.id,e.type=t.list_type,e.position=t.position,e.getIssues()})}},{key:"destroy",value:function(){var e=gl.issueBoards.BoardsStore.state.lists.indexOf(this);gl.issueBoards.BoardsStore.state.lists.splice(e,1),gl.issueBoards.BoardsStore.updateNewListDropdown(this.id),gl.boardService.destroyList(this.id).catch(function(){})}},{key:"update",value:function(){gl.boardService.updateList(this.id,this.position).catch(function(){})}},{key:"nextPage",value:function(){if(this.issuesSize>this.issues.length)return this.issues.length/20>=1&&(this.page+=1),this.getIssues(!1)}},{key:"getIssues",value:function(){var e=this,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=t.i(i.a)(gl.issueBoards.BoardsStore.filter.path,{page:this.page});return this.label&&n.label_name&&(n.label_name=n.label_name.filter(function(s){return s!==e.label.title})),s&&(this.loading=!0),gl.boardService.getIssuesForList(this.id,n).then(function(t){var n=t.json();e.loading=!1,e.issuesSize=n.size,s&&(e.issues=[]),e.createIssues(n.issues)})}},{key:"newIssue",value:function(e){var s=this;return this.addIssue(e,null,0),this.issuesSize+=1,gl.boardService.newIssue(this.id,e).then(function(s){var t=s.json();e.id=t.iid}).then(function(){if(s.issuesSize>1){var t=s.issues[1].id;gl.boardService.moveIssue(e.id,null,null,null,t)}})}},{key:"createIssues",value:function(e){var s=this;e.forEach(function(e){s.addIssue(new ListIssue(e,s.defaultAvatar))})}},{key:"addIssue",value:function(e,s,t){var n=null,i=null;this.findIssue(e.id)||(void 0!==t?(this.issues.splice(t,0,e),this.issues[t-1]&&(n=this.issues[t-1].id),this.issues[t+1]&&(i=this.issues[t+1].id)):this.issues.push(e),this.label&&e.addLabel(this.label),s&&(this.issuesSize+=1,this.updateIssueLabel(e,s,n,i)))}},{key:"moveIssue",value:function(e,s,t,n,i){this.issues.splice(s,1),this.issues.splice(t,0,e),gl.boardService.moveIssue(e.id,null,null,n,i).catch(function(){})}},{key:"updateIssueLabel",value:function(e,s,t,n){gl.boardService.moveIssue(e.id,s.id,this.id,t,n).catch(function(){})}},{key:"findIssue",value:function(e){return this.issues.filter(function(s){return s.id===e})[0]}},{key:"removeIssue",value:function(e){var s=this;this.issues=this.issues.filter(function(t){var n=e.id===t.id;return n&&(s.issuesSize-=1,t.removeLabel(s.label)),!n})}}]),e}();window.List=a},"./boards/models/milestone.js":function(e,s){function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var n=function e(s){t(this,e),this.id=s.id,this.title=s.title};window.ListMilestone=n},"./boards/services/board_service.js":function(e,s,t){"use strict";(function(e){function s(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}(),o=function(){function t(i,o,a){s(this,t),this.boards=n.default.resource(i+"{/id}.json",{},{issues:{method:"GET",url:i+"/"+a+"/issues.json"}}),this.lists=n.default.resource(i+"/"+a+"/lists{/id}",{},{generate:{method:"POST",url:i+"/"+a+"/lists/generate.json"}}),this.issue=n.default.resource(i+"/"+a+"/issues{/id}",{}),this.issues=n.default.resource(i+"/"+a+"/lists{/id}/issues",{},{bulkUpdate:{method:"POST",url:o}}),n.default.http.interceptors.push(function(s,t){s.headers["X-CSRF-Token"]=e.rails.csrfToken(),t()})}return i(t,[{key:"all",value:function(){return this.lists.get()}},{key:"generateDefaultLists",value:function(){return this.lists.generate({})}},{key:"createList",value:function(e){return this.lists.save({},{list:{label_id:e}})}},{key:"updateList",value:function(e,s){return this.lists.update({id:e},{list:{position:s}})}},{key:"destroyList",value:function(e){return this.lists.delete({id:e})}},{key:"getIssuesForList",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={id:e};return Object.keys(s).forEach(function(e){t[e]=s[e]}),this.issues.get(t)}},{key:"moveIssue",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this.issue.update({id:e},{from_list_id:s,to_list_id:t,move_before_iid:n,move_after_iid:i})}},{key:"newIssue",value:function(e,s){return this.issues.save({id:e},{issue:s})}},{key:"getBacklog",value:function(e){return this.boards.issues(e)}},{key:"bulkUpdate",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={update:Object.assign(s,{issuable_ids:e.join(",")})};return this.issues.bulkUpdate(t)}}]),t}();window.BoardService=o}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/stores/boards_store.js":function(e,s,t){"use strict";(function(e){var s=t("../../../node_modules/js-cookie/src/js.cookie.js"),n=t.n(s);window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardsStore={disabled:!1,filter:{path:""},state:{},detail:{issue:{}},moving:{issue:{},list:{}},create:function(){this.state.lists=[],this.filter.path=gl.utils.getUrlParamsArray().join("&"),this.detail={issue:{}}},addList:function(e,s){var t=new List(e,s);return this.state.lists.push(t),t},new:function(e){var s=this,t=this.addList(e),n=this.findList("type","backlog","backlog");t.save().then(function(){t.issues.forEach(n.removeIssue.bind(n)),s.state.lists=_.sortBy(s.state.lists,"position")}).catch(function(){}),this.removeBlankState()},updateNewListDropdown:function(s){e(".js-board-list-"+s).removeClass("is-active")},shouldAddBlankState:function(){return!this.state.lists.filter(function(e){return"backlog"!==e.type&&"closed"!==e.type})[0]},addBlankState:function(){!this.shouldAddBlankState()||this.welcomeIsHidden()||this.disabled||(this.addList({id:"blank",list_type:"blank",title:"Welcome to your Issue Board!",position:0}),this.state.lists=_.sortBy(this.state.lists,"position"))},removeBlankState:function(){this.removeList("blank"),n.a.set("issue_board_welcome_hidden","true",{expires:3650,path:""})},welcomeIsHidden:function(){return"true"===n.a.get("issue_board_welcome_hidden")},removeList:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank";this.findList("id",e,s)&&(this.state.lists=this.state.lists.filter(function(s){return s.id!==e}))},moveList:function(e,s){var t=this;s.forEach(function(e,s){t.findList("id",parseInt(e,10)).position=s}),e.update()},moveIssueToList:function(e,s,t,n){var i=s.findIssue(t.id),o=t.getLists(),a=o.map(function(e){return e.label});i?(s.updateIssueLabel(t,e),i.removeLabel(e.label)):s.addIssue(t,e,n),"closed"===s.type&&"backlog"!==e.type?(o.forEach(function(e){e.removeIssue(t)}),t.removeLabels(a)):e.removeIssue(t)},moveIssueInList:function(e,s,t,n,i){var o=parseInt(i[n-1],10)||null,a=parseInt(i[n+1],10)||null;e.moveIssue(s,t,n,o,a)},findList:function(e,s){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";return this.state.lists.filter(function(n){var i=!t||n.type===t;return n[e]===s&&i})[0]},updateFiltersUrl:function(){history.pushState(null,null,"?"+this.filter.path)}}}).call(s,t("../../../node_modules/jquery/dist/jquery.js"))},"./boards/stores/modal_store.js":function(e,s){function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}();window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{};var i=function(){function e(){t(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}return n(e,[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var s=e,t=s.selected;s.selected=!t,t?this.removeSelectedIssue(s):this.addSelectedIssue(s)}},{key:"toggleAll",value:function(){var e=this,s=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach(function(t){var n=t;n.selected!==s&&(n.selected=s,s?e.addSelectedIssue(t):e.removeSelectedIssue(t))})}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter(function(e){return e.selected})}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||s)&&(this.store.selectedIssues=this.store.selectedIssues.filter(function(s){return s.id!==e.id}))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach(function(s){s.selected||e.removeSelectedIssue(s,!0)})}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter(function(s){return s.id===e.id})[0]}}]),e}();gl.issueBoards.ModalStore=new i},"./boards/utils/query_data.js":function(e,s,t){"use strict";s.a=function(e,s){return e.split("&").reduce(function(e,s){if(""===s)return e;var t=e,n=s.split("="),i=n[0].replace("[]",""),o=n[0].indexOf("[]"),a=decodeURIComponent(n[1]).replace(/\+/g," ");return-1!==o?(t[i]||(t[i]=[]),t[i].push(a)):t[i]=a,t},s)}},"./filtered_search/container.js":function(e,s,t){"use strict";function n(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,t,n){return t&&e(s.prototype,t),n&&e(s,n),s}}(),o=document,a=function(){function e(){n(this,e)}return i(e,[{key:"container",set:function(e){o=e},get:function(){return o}}]),e}();s.a=new a},"./sidebar/components/assignees/assignee_title.js":function(e,s,t){"use strict";s.a={name:"AssigneeTitle",props:{loading:{type:Boolean,required:!1,default:!1},numberOfAssignees:{type:Number,required:!0},editable:{type:Boolean,required:!0}},computed:{assigneeTitle:function(){var e=this.numberOfAssignees;return e>1?e+" Assignees":"Assignee"}},template:'\n    <div class="title hide-collapsed">\n      {{assigneeTitle}}\n      <i\n        v-if="loading"\n        aria-hidden="true"\n        class="fa fa-spinner fa-spin block-loading"\n      />\n      <a\n        v-if="editable"\n        class="edit-link pull-right"\n        href="#"\n      >\n        Edit\n      </a>\n    </div>\n  '}},"./sidebar/components/assignees/assignees.js":function(e,s,t){"use strict";s.a={name:"Assignees",data:function(){return{defaultRenderCount:5,defaultMaxCounter:99,showLess:!0}},props:{rootPath:{type:String,required:!0},users:{type:Array,required:!0},editable:{type:Boolean,required:!0}},computed:{firstUser:function(){return this.users[0]},hasMoreThanTwoAssignees:function(){return this.users.length>2},hasMoreThanOneAssignee:function(){return this.users.length>1},hasAssignees:function(){return this.users.length>0},hasNoUsers:function(){return!this.users.length},hasOneUser:function(){return 1===this.users.length},renderShowMoreSection:function(){return this.users.length>this.defaultRenderCount},numberOfHiddenAssignees:function(){return this.users.length-this.defaultRenderCount},isHiddenAssignees:function(){return this.numberOfHiddenAssignees>0},hiddenAssigneesLabel:function(){return"+ "+this.numberOfHiddenAssignees+" more"},collapsedTooltipTitle:function(){var e=Math.min(this.defaultRenderCount,this.users.length),s=this.users.slice(0,e),t=s.map(function(e){return e.name});return this.users.length>e&&t.push("+ "+(this.users.length-e)+" more"),t.join(", ")},sidebarAvatarCounter:function(){var e="+"+(this.users.length-1);return this.users.length>this.defaultMaxCounter&&(e=this.defaultMaxCounter+"+"),e}},methods:{assignSelf:function(){this.$emit("assign-self")},toggleShowLess:function(){this.showLess=!this.showLess},renderAssignee:function(e){return!this.showLess||e<this.defaultRenderCount&&this.showLess},avatarUrl:function(e){return e.avatar||e.avatar_url},assigneeUrl:function(e){return""+this.rootPath+e.username},assigneeAlt:function(e){return e.name+"'s avatar"},assigneeUsername:function(e){return"@"+e.username},shouldRenderCollapsedAssignee:function(e){var s=this.users.length<=2&&e<=2;return 0===e||s}},template:'\n    <div>\n      <div\n        class="sidebar-collapsed-icon sidebar-collapsed-user"\n        :class="{ \'multiple-users\': hasMoreThanOneAssignee, \'has-tooltip\': hasAssignees }"\n        data-container="body"\n        data-placement="left"\n        :title="collapsedTooltipTitle"\n      >\n        <i\n          v-if="hasNoUsers"\n          aria-label="No Assignee"\n          class="fa fa-user"\n        />\n        <button\n          type="button"\n          class="btn-link"\n          v-for="(user, index) in users"\n          v-if="shouldRenderCollapsedAssignee(index)"\n        >\n          <img\n            width="24"\n            class="avatar avatar-inline s24"\n            :alt="assigneeAlt(user)"\n            :src="avatarUrl(user)"\n          />\n          <span class="author">\n            {{ user.name }}\n          </span>\n        </button>\n        <button\n          v-if="hasMoreThanTwoAssignees"\n          class="btn-link"\n          type="button"\n        >\n          <span\n            class="avatar-counter sidebar-avatar-counter"\n          >\n            {{ sidebarAvatarCounter }}\n          </span>\n        </button>\n      </div>\n      <div class="value hide-collapsed">\n        <template v-if="hasNoUsers">\n          <span class="assign-yourself no-value">\n            No assignee\n            <template v-if="editable">\n             -\n              <button\n                type="button"\n                class="btn-link"\n                @click="assignSelf"\n              >\n                assign yourself\n              </button>\n            </template>\n          </span>\n        </template>\n        <template v-else-if="hasOneUser">\n          <a\n            class="author_link bold"\n            :href="assigneeUrl(firstUser)"\n          >\n            <img\n              width="32"\n              class="avatar avatar-inline s32"\n              :alt="assigneeAlt(firstUser)"\n              :src="avatarUrl(firstUser)"\n            />\n            <span class="author">\n              {{ firstUser.name }}\n            </span>\n            <span class="username">\n              {{ assigneeUsername(firstUser) }}\n            </span>\n          </a>\n        </template>\n        <template v-else>\n          <div class="user-list">\n            <div\n              class="user-item"\n              v-for="(user, index) in users"\n              v-if="renderAssignee(index)"\n            >\n              <a\n                class="user-link has-tooltip"\n                data-placement="bottom"\n                :href="assigneeUrl(user)"\n                :data-title="user.name"\n              >\n                <img\n                  width="32"\n                  class="avatar avatar-inline s32"\n                  :alt="assigneeAlt(user)"\n                  :src="avatarUrl(user)"\n                />\n              </a>\n            </div>\n          </div>\n          <div\n            v-if="renderShowMoreSection"\n            class="user-list-more"\n          >\n            <button\n              type="button"\n              class="btn-link"\n              @click="toggleShowLess"\n            >\n              <template v-if="showLess">\n                {{ hiddenAssigneesLabel }}\n              </template>\n              <template v-else>\n                - show less\n              </template>\n            </button>\n          </div>\n        </template>\n      </div>\n    </div>\n  '}},"./sidebar/event_hub.js":function(e,s,t){"use strict";var n=t("../../../node_modules/vue/dist/vue.esm.js"),i=new n.default;window.emitSidebarEvent=function(){return i.$emit.apply(i,arguments)},s.a=i}},["./boards/boards_bundle.js"]);
//# sourceMappingURL=boards.fefd6fc038b90dd97459.bundle.js.map