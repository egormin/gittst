webpackJsonp(["schedule_form"],{"./pipeline_schedules/components/interval_pattern_input.js":function(e,n,t){"use strict";var i=t("../../../node_modules/vue/dist/vue.esm.js"),r=t("./vue_shared/translate.js");i.default.use(r.a);n.a={props:{initialCronInterval:{type:String,required:!1,default:""}},data:function(){return{inputNameAttribute:"schedule[cron]",cronInterval:this.initialCronInterval,cronIntervalPresets:{everyDay:"0 4 * * *",everyWeek:"0 4 * * 0",everyMonth:"0 4 1 * *"},cronSyntaxUrl:"https://en.wikipedia.org/wiki/Cron",customInputEnabled:!1}},computed:{intervalIsPreset:function(){return _.contains(this.cronIntervalPresets,this.cronInterval)},isEditable:function(){return!(!this.customInputEnabled&&this.intervalIsPreset)}},methods:{toggleCustomInput:function(e){this.customInputEnabled=e,e&&(this.cronInterval=this.cronInterval+" ")}},created:function(){this.intervalIsPreset&&(this.enableCustomInput=!1)},watch:{cronInterval:function(){i.default.nextTick(function(){gl.pipelineScheduleFieldErrors.updateFormValidityState()})}},template:'\n    <div class="interval-pattern-form-group">\n      <div class="cron-preset-radio-input">\n        <input\n          id="custom"\n          class="label-light"\n          type="radio"\n          :name="inputNameAttribute"\n          :value="cronInterval"\n          :checked="isEditable"\n          @click="toggleCustomInput(true)"\n        />\n\n        <label for="custom">\n          {{ s__(\'PipelineSheduleIntervalPattern|Custom\') }}\n        </label>\n\n        <span class="cron-syntax-link-wrap">\n          (<a :href="cronSyntaxUrl" target="_blank">{{ __(\'Cron syntax\') }}</a>)\n        </span>\n      </div>\n\n      <div class="cron-preset-radio-input">\n        <input\n          id="every-day"\n          class="label-light"\n          type="radio"\n          v-model="cronInterval"\n          :name="inputNameAttribute"\n          :value="cronIntervalPresets.everyDay"\n          @click="toggleCustomInput(false)"\n        />\n\n        <label class="label-light" for="every-day">\n          {{ __(\'Every day (at 4:00am)\') }}\n        </label>\n      </div>\n\n      <div class="cron-preset-radio-input">\n        <input\n          id="every-week"\n          class="label-light"\n          type="radio"\n          v-model="cronInterval"\n          :name="inputNameAttribute"\n          :value="cronIntervalPresets.everyWeek"\n          @click="toggleCustomInput(false)"\n        />\n\n        <label class="label-light" for="every-week">\n          {{ __(\'Every week (Sundays at 4:00am)\') }}\n        </label>\n      </div>\n\n      <div class="cron-preset-radio-input">\n        <input\n          id="every-month"\n          class="label-light"\n          type="radio"\n          v-model="cronInterval"\n          :name="inputNameAttribute"\n          :value="cronIntervalPresets.everyMonth"\n          @click="toggleCustomInput(false)"\n        />\n\n        <label class="label-light" for="every-month">\n          {{ __(\'Every month (on the 1st at 4:00am)\') }}\n        </label>\n      </div>\n\n      <div class="cron-interval-input-wrapper">\n        <input\n          id="schedule_cron"\n          class="form-control inline cron-interval-input"\n          type="text"\n          :placeholder="__(\'Define a custom pattern with cron syntax\')"\n          required="true"\n          v-model="cronInterval"\n          :name="inputNameAttribute"\n          :disabled="!isEditable"\n        />\n      </div>\n    </div>\n  '}},"./pipeline_schedules/components/target_branch_dropdown.js":function(e,n,t){"use strict";(function(e){function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=function(){function n(){t(this,n),this.$dropdown=e(".js-target-branch-dropdown"),this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=e("#schedule_ref"),this.initDefaultBranch(),this.initDropdown()}return i(n,[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.formatBranchesList(),filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(n){return e.updateInputValue(n)},text:function(e){return e.name}}),this.setDropdownToggle()}},{key:"formatBranchesList",value:function(){return this.$dropdown.data("data").map(function(e){return{name:e}})}},{key:"setDropdownToggle",value:function(){var e=this.$input.val();this.$dropdownToggle.text(e)}},{key:"initDefaultBranch",value:function(){var e=this.$input.val(),n=this.$dropdown.data("defaultBranch");e||this.$input.val(n)}},{key:"updateInputValue",value:function(e){var n=e.selectedObj;e.e.preventDefault(),this.$input.val(n.name),gl.pipelineScheduleFieldErrors.updateFormValidityState()}}]),n}();n.a=r}).call(n,t("../../../node_modules/jquery/dist/jquery.js"))},"./pipeline_schedules/components/timezone_dropdown.js":function(e,n,t){"use strict";(function(e){function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=function(){function n(){t(this,n),this.$dropdown=e(".js-timezone-dropdown"),this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=e("#schedule_cron_timezone"),this.timezoneData=this.$dropdown.data("data"),this.initDefaultTimezone(),this.initDropdown()}return i(n,[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.timezoneData,filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(n){return e.updateInputValue(n)},text:function(n){return e.formatTimezone(n)}}),this.setDropdownToggle()}},{key:"formatUtcOffset",value:function(e){var n="";return e>0?n="+":e<0&&(n="-"),n+" "+Math.abs(e/3600)}},{key:"formatTimezone",value:function(e){return"[UTC "+this.formatUtcOffset(e.offset)+"] "+e.name}},{key:"initDefaultTimezone",value:function(){this.$input.val()||this.$input.val("UTC")}},{key:"setDropdownToggle",value:function(){var e=this.$input.val();this.$dropdownToggle.text(e)}},{key:"updateInputValue",value:function(e){var n=e.selectedObj;e.e.preventDefault(),this.$input.val(n.identifier),gl.pipelineScheduleFieldErrors.updateFormValidityState()}}]),n}();n.a=r}).call(n,t("../../../node_modules/jquery/dist/jquery.js"))},"./pipeline_schedules/pipeline_schedule_form_bundle.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../node_modules/vue/dist/vue.esm.js"),r=t("./pipeline_schedules/components/interval_pattern_input.js"),a=t("./pipeline_schedules/components/timezone_dropdown.js"),o=t("./pipeline_schedules/components/target_branch_dropdown.js");document.addEventListener("DOMContentLoaded",function(){var e=i.default.extend(r.a),n=document.getElementById("interval-pattern-input");new e({propsData:{initialCronInterval:n?n.dataset.initialInterval:""}}).$mount(n);var t=document.getElementById("new-pipeline-schedule-form");gl.timezoneDropdown=new a.a,gl.targetBranchDropdown=new o.a,gl.pipelineScheduleFieldErrors=new gl.GlFieldErrors(t)})}},["./pipeline_schedules/pipeline_schedule_form_bundle.js"]);
//# sourceMappingURL=schedule_form.9de5cf0fc3ea60961ae3.bundle.js.map