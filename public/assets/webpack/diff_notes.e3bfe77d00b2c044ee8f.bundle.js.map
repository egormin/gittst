{"version":3,"sources":["webpack:///diff_notes.e3bfe77d00b2c044ee8f.bundle.js","webpack:////var/cache/omnibus/src/gitlab-rails/~/vue-loader/lib/component-normalizer.js?6be9****","webpack:///../images/no_avatar.png?c09c**","webpack:///./diff_notes/components/comment_resolve_btn.js","webpack:///./diff_notes/components/diff_note_avatars.js","webpack:///./diff_notes/components/jump_to_discussion.js","webpack:///./diff_notes/components/new_issue_for_discussion.js","webpack:///./diff_notes/components/resolve_btn.js","webpack:///./diff_notes/components/resolve_count.js","webpack:///./diff_notes/components/resolve_discussion_btn.js","webpack:///./diff_notes/diff_notes_bundle.js","webpack:///./diff_notes/icons/collapse_icon.svg","webpack:///./diff_notes/mixins/discussion.js","webpack:///./diff_notes/models/discussion.js","webpack:///./diff_notes/models/note.js","webpack:///./diff_notes/services/resolve.js","webpack:///./diff_notes/stores/comments.js"],"names":["webpackJsonp","../../../node_modules/vue-loader/lib/component-normalizer.js","module","exports","rawScriptExports","compiledTemplate","scopeId","cssModules","esModule","scriptExports","type","default","options","render","staticRenderFns","_scopeId","computed","Object","create","keys","forEach","key","../images/no_avatar.png","./diff_notes/components/comment_resolve_btn.js","__webpack_exports__","__webpack_require__","$","__WEBPACK_IMPORTED_MODULE_0_vue__","CommentAndResolveBtn","extend","props","discussionId","String","data","textareaIsEmpty","discussion","showButton","this","isResolvable","isDiscussionResolved","isResolved","buttonText","created","CommentsStore","state","mounted","_this","$textarea","val","on","destroyed","off","component","call","./diff_notes/components/diff_note_avatars.js","__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__","__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default","n","__WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue__","__WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue___default","DiffNoteAvatars","isVisible","lineType","storeState","shownAvatars","collapseIcon","a","components","userAvatarImage","template","$nextTick","addNoCommentClass","setDiscussionVisible","$el","closest","hasClass","document","watch","handler","_this2","tooltip","deep","notesSubset","_this3","notes","slice","map","noteId","extraNotesTitle","extra","notesCount","moreText","methods","clickedAvatar","e","_this4","onAddDiffNote","toggleDiscussionsToggleState","toggleClass","nextUntil","$notesHolders","find","$visibleNotesHolders","filter","length","id","is","getTooltipText","note","authorName","noteTruncated","./diff_notes/components/jump_to_discussion.js","JumpToDiscussion","mixins","DiscussionMixins","discussions","allResolved","unresolvedDiscussionCount","lastResolvedId","lastId","jumpToNextUnresolvedDiscussion","discussionsSelector","discussionIdsInScope","firstUnresolvedDiscussionId","nextUnresolvedDiscussionId","activeTab","window","mrTabs","currentAction","hasDiscussionsToJumpTo","jumpToFirstDiscussion","discussionIdsForElements","elements","attr","toArray","i","activateTab","currentDiscussionFound","$target","trigger","show","prevEl","prev","scrollTo","offset","./diff_notes/components/new_issue_for_discussion.js","NewIssueForDiscussion","required","./diff_notes/components/resolve_btn.js","ResolveBtn","Number","resolved","Boolean","canResolve","resolvedBy","authorAvatar","loading","getNote","resolvedByName","resolved_by","updateTooltip","$refs","button","resolve","errorFlashMsg","promise","ResolveService","unresolve","then","response","status","json","update","updateHeadline","gl","mrWidget","checkStatus","Flash","catch","container","beforeDestroy","delete","./diff_notes/components/resolve_count.js","ResolveCount","loggedOut","resolvedDiscussionCount","discussionCount","resolvedCountText","./diff_notes/components/resolve_discussion_btn.js","ResolveDiscussionBtn","mergeRequestId","toggleResolveForDiscussion","createDiscussion","./diff_notes/diff_notes_bundle.js","defineProperty","value","__WEBPACK_IMPORTED_MODULE_2__models_note__","__WEBPACK_IMPORTED_MODULE_5__mixins_discussion__","projectPath","querySelector","dataset","diffNoteApps","DiffNotesResolveServiceClass","diffNotesCompileComponents","each","tmp","get","outerHTML","tmpApp","$mount","replaceWith","$components","$this","el","resolve-count","./diff_notes/icons/collapse_icon.svg","./diff_notes/mixins/discussion.js","resolvedCount","unresolvedCount","./diff_notes/models/discussion.js","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","DiscussionModel","noteObj","set","NoteModel","discussionSelector","$discussionHeadline","discussion_headline_html","append","utils","localTimeAgo","remove","./diff_notes/models/note.js","./diff_notes/services/resolve.js","ResolveServiceClass","root","noteResource","resource","discussionResource","save","unResolveAll","resolveAll","Error","unResolveAllNotes","resolveAllNotes","./diff_notes/stores/comments.js","undefined","createNote","deleteNote","unresolvedDiscussionIds","ids","push"],"mappings":"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","file":"diff_notes.e3bfe77d00b2c044ee8f.bundle.js","sourcesContent":["webpackJsonp([\"diff_notes\"],{\n\n/***/ \"../../../node_modules/vue-loader/lib/component-normalizer.js\":\n/***/ (function(module, exports) {\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  scopeId,\n  cssModules\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  // inject cssModules\n  if (cssModules) {\n    var computed = Object.create(options.computed || null)\n    Object.keys(cssModules).forEach(function (key) {\n      var module = cssModules[key]\n      computed[key] = function () { return module }\n    })\n    options.computed = computed\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n\n/***/ \"../images/no_avatar.png\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAAAAAAdJSU2AAACNElEQVR4AdXYBa7jMBCA4b3/JZahzIkjp2qt+BWUWnG5ln2XxaJJb2b5F2ukL4wvzK/rP7bUcbf92u6oftLSe1ldk8efsfaVeEjusZZeC6e1RllaCk/yG6ag1lZ4WwPX69uyD6tAe/g2ipAlNMRS37awDLaFrpcMWxXQOi0jnWCWjFkSZomYJWDWKmatYNZyEWkJsvQimoZYah5NgdaLxagCtF6GRy0DshZPkeYwS/KIJWGWYjwYUzDLxCwDtJ54OKglimBLqHWahii2g1pmHLLGBmwVoRjcKlmgOdw65H5qKuGWCVi5Qlhs6m1sENZi4q3AWNvca5UYy2RjT/SAsiZey6CsIvc0wVlV5lJ0ibPMyLUGCmlxQq0IM0hLdWyro7CWEc3sXsqaK4O2zLxOsmtpfW5Q1u68ZrVmepaaNXEewawtI9X5Xl3U3n1qND6+rfPzvqoIWz/fklNCSLY153YV53J/XUxGCJnKZ1lajsn3/Ffegf6Y5pV2LUsSNL2UHzxUfh3TlYpZqqTpXZm0KZk9zJcqaEmaWPHDw0pxe05K7bWOLHFLWXVetqpYmrjle4+1y0aBaF4UOQ1NU+lYezJClkjLUnSEjqhH6zjAW4OjtY39Ibq+sawUb6W2RQfoqG0VeKuwrRJvlba17faRdbe2pTtYq6Nty/S7yAbGsQjWIq41wVoT1+IdZNy1djUcVdu5lklQWC0xHkt1X31qNEE1Pr3qKv/9XiSNj6Aaifj3/69+AYujsR/MvkpZAAAAAElFTkSuQmCC\"\n\n/***/ }),\n\n/***/ \"./diff_notes/components/comment_resolve_btn.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, quotes, no-lonely-if, max-len */\n/* global CommentsStore */\n\n\n\nvar CommentAndResolveBtn = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  props: {\n    discussionId: String\n  },\n  data: function data() {\n    return {\n      textareaIsEmpty: true,\n      discussion: {}\n    };\n  },\n\n  computed: {\n    showButton: function showButton() {\n      if (this.discussion) {\n        return this.discussion.isResolvable();\n      } else {\n        return false;\n      }\n    },\n    isDiscussionResolved: function isDiscussionResolved() {\n      return this.discussion.isResolved();\n    },\n    buttonText: function buttonText() {\n      if (this.isDiscussionResolved) {\n        if (this.textareaIsEmpty) {\n          return \"Unresolve discussion\";\n        } else {\n          return \"Comment & unresolve discussion\";\n        }\n      } else {\n        if (this.textareaIsEmpty) {\n          return \"Resolve discussion\";\n        } else {\n          return \"Comment & resolve discussion\";\n        }\n      }\n    }\n  },\n  created: function created() {\n    if (this.discussionId) {\n      this.discussion = CommentsStore.state[this.discussionId];\n    }\n  },\n\n  mounted: function mounted() {\n    var _this = this;\n\n    if (!this.discussionId) return;\n\n    var $textarea = $(\".js-discussion-note-form[data-discussion-id=\" + this.discussionId + \"] .note-textarea\");\n    this.textareaIsEmpty = $textarea.val() === '';\n\n    $textarea.on('input.comment-and-resolve-btn', function () {\n      _this.textareaIsEmpty = $textarea.val() === '';\n    });\n  },\n  destroyed: function destroyed() {\n    if (!this.discussionId) return;\n\n    $(\".js-discussion-note-form[data-discussion-id=\" + this.discussionId + \"] .note-textarea\").off('input.comment-and-resolve-btn');\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('comment-and-resolve-btn', CommentAndResolveBtn);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/components/diff_note_avatars.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__ = __webpack_require__(\"./diff_notes/icons/collapse_icon.svg\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue__ = __webpack_require__(\"./vue_shared/components/user_avatar/user_avatar_image.vue\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue__);\n/* global CommentsStore */\n/* global notes */\n\n\n\n\n\nvar DiffNoteAvatars = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  props: ['discussionId'],\n  data: function data() {\n    return {\n      isVisible: false,\n      lineType: '',\n      storeState: CommentsStore.state,\n      shownAvatars: 3,\n      collapseIcon: __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default.a\n    };\n  },\n\n  components: {\n    userAvatarImage: __WEBPACK_IMPORTED_MODULE_2__vue_shared_components_user_avatar_user_avatar_image_vue___default.a\n  },\n  template: '\\n    <div class=\"diff-comment-avatar-holders\"\\n      v-show=\"notesCount !== 0\">\\n      <div v-if=\"!isVisible\">\\n        <!-- FIXME: Pass an alt attribute here for accessibility -->\\n        <user-avatar-image\\n          v-for=\"note in notesSubset\"\\n          class=\"diff-comment-avatar js-diff-comment-avatar\"\\n          @click.native=\"clickedAvatar($event)\"\\n          :img-src=\"note.authorAvatar\"\\n          :tooltip-text=\"getTooltipText(note)\"\\n          :data-line-type=\"lineType\"\\n          :size=\"19\"\\n          data-html=\"true\"\\n        />\\n        <span v-if=\"notesCount > shownAvatars\"\\n          class=\"diff-comments-more-count has-tooltip js-diff-comment-avatar\"\\n          data-container=\"body\"\\n          data-placement=\"top\"\\n          ref=\"extraComments\"\\n          role=\"button\"\\n          :data-line-type=\"lineType\"\\n          :title=\"extraNotesTitle\"\\n          @click=\"clickedAvatar($event)\">{{ moreText }}</span>\\n      </div>\\n      <button class=\"diff-notes-collapse js-diff-comment-avatar\"\\n        type=\"button\"\\n        aria-label=\"Show comments\"\\n        :data-line-type=\"lineType\"\\n        @click=\"clickedAvatar($event)\"\\n        v-if=\"isVisible\"\\n        v-html=\"collapseIcon\">\\n      </button>\\n    </div>\\n  ',\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.addNoCommentClass();\n      _this.setDiscussionVisible();\n\n      _this.lineType = $(_this.$el).closest('.diff-line-num').hasClass('old_line') ? 'old' : 'new';\n    });\n\n    $(document).on('toggle.comments', function () {\n      _this.$nextTick(function () {\n        _this.setDiscussionVisible();\n      });\n    });\n  },\n  destroyed: function destroyed() {\n    $(document).off('toggle.comments');\n  },\n\n  watch: {\n    storeState: {\n      handler: function handler() {\n        var _this2 = this;\n\n        this.$nextTick(function () {\n          $('.has-tooltip', _this2.$el).tooltip('fixTitle');\n\n          // We need to add/remove a class to an element that is outside the Vue instance\n          _this2.addNoCommentClass();\n        });\n      },\n\n      deep: true\n    }\n  },\n  computed: {\n    notesSubset: function notesSubset() {\n      var _this3 = this;\n\n      var notes = [];\n\n      if (this.discussion) {\n        notes = Object.keys(this.discussion.notes).slice(0, this.shownAvatars).map(function (noteId) {\n          return _this3.discussion.notes[noteId];\n        });\n      }\n\n      return notes;\n    },\n    extraNotesTitle: function extraNotesTitle() {\n      if (this.discussion) {\n        var extra = this.discussion.notesCount() - this.shownAvatars;\n\n        return extra + ' more comment' + (extra > 1 ? 's' : '');\n      }\n\n      return '';\n    },\n    discussion: function discussion() {\n      return this.storeState[this.discussionId];\n    },\n    notesCount: function notesCount() {\n      if (this.discussion) {\n        return this.discussion.notesCount();\n      }\n\n      return 0;\n    },\n    moreText: function moreText() {\n      var plusSign = this.notesCount < 100 ? '+' : '';\n\n      return '' + plusSign + (this.notesCount - this.shownAvatars);\n    }\n  },\n  methods: {\n    clickedAvatar: function clickedAvatar(e) {\n      var _this4 = this;\n\n      notes.onAddDiffNote(e);\n\n      // Toggle the active state of the toggle all button\n      this.toggleDiscussionsToggleState();\n\n      this.$nextTick(function () {\n        _this4.setDiscussionVisible();\n\n        $('.has-tooltip', _this4.$el).tooltip('fixTitle');\n        $('.has-tooltip', _this4.$el).tooltip('hide');\n      });\n    },\n    addNoCommentClass: function addNoCommentClass() {\n      var notesCount = this.notesCount;\n\n      $(this.$el).closest('.js-avatar-container').toggleClass('js-no-comment-btn', notesCount > 0).nextUntil('.js-avatar-container').toggleClass('js-no-comment-btn', notesCount > 0);\n    },\n    toggleDiscussionsToggleState: function toggleDiscussionsToggleState() {\n      var $notesHolders = $(this.$el).closest('.code').find('.notes_holder');\n      var $visibleNotesHolders = $notesHolders.filter(':visible');\n      var $toggleDiffCommentsBtn = $(this.$el).closest('.diff-file').find('.js-toggle-diff-comments');\n\n      $toggleDiffCommentsBtn.toggleClass('active', $notesHolders.length === $visibleNotesHolders.length);\n    },\n    setDiscussionVisible: function setDiscussionVisible() {\n      this.isVisible = $('.diffs .notes[data-discussion-id=\"' + this.discussion.id + '\"]').is(':visible');\n    },\n    getTooltipText: function getTooltipText(note) {\n      return note.authorName + ': ' + note.noteTruncated;\n    }\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('diff-note-avatars', DiffNoteAvatars);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/components/jump_to_discussion.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, guard-for-in, no-restricted-syntax, one-var, space-before-function-paren, no-lonely-if, no-continue, brace-style, max-len, quotes */\n/* global DiscussionMixins */\n/* global CommentsStore */\n\n\n\nvar JumpToDiscussion = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  mixins: [DiscussionMixins],\n  props: {\n    discussionId: String\n  },\n  data: function data() {\n    return {\n      discussions: CommentsStore.state,\n      discussion: {}\n    };\n  },\n  computed: {\n    buttonText: function buttonText() {\n      if (this.discussionId) {\n        return 'Jump to next unresolved discussion';\n      } else {\n        return 'Jump to first unresolved discussion';\n      }\n    },\n    allResolved: function allResolved() {\n      return this.unresolvedDiscussionCount === 0;\n    },\n    showButton: function showButton() {\n      if (this.discussionId) {\n        if (this.unresolvedDiscussionCount > 1) {\n          return true;\n        } else {\n          return this.discussionId !== this.lastResolvedId;\n        }\n      } else {\n        return this.unresolvedDiscussionCount >= 1;\n      }\n    },\n    lastResolvedId: function lastResolvedId() {\n      var lastId = void 0;\n      for (var discussionId in this.discussions) {\n        var discussion = this.discussions[discussionId];\n\n        if (!discussion.isResolved()) {\n          lastId = discussion.id;\n        }\n      }\n      return lastId;\n    }\n  },\n  methods: {\n    jumpToNextUnresolvedDiscussion: function jumpToNextUnresolvedDiscussion() {\n      var discussionsSelector = void 0;\n      var discussionIdsInScope = void 0;\n      var firstUnresolvedDiscussionId = void 0;\n      var nextUnresolvedDiscussionId = void 0;\n      var activeTab = window.mrTabs.currentAction;\n      var hasDiscussionsToJumpTo = true;\n      var jumpToFirstDiscussion = !this.discussionId;\n\n      var discussionIdsForElements = function discussionIdsForElements(elements) {\n        return elements.map(function () {\n          return $(this).attr('data-discussion-id');\n        }).toArray();\n      };\n\n      var discussions = this.discussions;\n\n      if (activeTab === 'diffs') {\n        discussionsSelector = '.diffs .notes[data-discussion-id]';\n        discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n\n        var unresolvedDiscussionCount = 0;\n\n        for (var i = 0; i < discussionIdsInScope.length; i += 1) {\n          var discussionId = discussionIdsInScope[i];\n          var discussion = discussions[discussionId];\n          if (discussion && !discussion.isResolved()) {\n            unresolvedDiscussionCount += 1;\n          }\n        }\n\n        if (this.discussionId && !this.discussion.isResolved()) {\n          // If this is the last unresolved discussion on the diffs tab,\n          // there are no discussions to jump to.\n          if (unresolvedDiscussionCount === 1) {\n            hasDiscussionsToJumpTo = false;\n          }\n        } else {\n          // If there are no unresolved discussions on the diffs tab at all,\n          // there are no discussions to jump to.\n          if (unresolvedDiscussionCount === 0) {\n            hasDiscussionsToJumpTo = false;\n          }\n        }\n      } else if (activeTab !== 'notes') {\n        // If we are on the commits or builds tabs,\n        // there are no discussions to jump to.\n        hasDiscussionsToJumpTo = false;\n      }\n\n      if (!hasDiscussionsToJumpTo) {\n        // If there are no discussions to jump to on the current page,\n        // switch to the notes tab and jump to the first disucssion there.\n        window.mrTabs.activateTab('notes');\n        activeTab = 'notes';\n        jumpToFirstDiscussion = true;\n      }\n\n      if (activeTab === 'notes') {\n        discussionsSelector = '.discussion[data-discussion-id]';\n        discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n      }\n\n      var currentDiscussionFound = false;\n      for (var _i = 0; _i < discussionIdsInScope.length; _i += 1) {\n        var _discussionId = discussionIdsInScope[_i];\n        var _discussion = discussions[_discussionId];\n\n        if (!_discussion) {\n          // Discussions for comments on commits in this MR don't have a resolved status.\n          continue;\n        }\n\n        if (!firstUnresolvedDiscussionId && !_discussion.isResolved()) {\n          firstUnresolvedDiscussionId = _discussionId;\n\n          if (jumpToFirstDiscussion) {\n            break;\n          }\n        }\n\n        if (!jumpToFirstDiscussion) {\n          if (currentDiscussionFound) {\n            if (!_discussion.isResolved()) {\n              nextUnresolvedDiscussionId = _discussionId;\n              break;\n            } else {\n              continue;\n            }\n          }\n\n          if (_discussionId === this.discussionId) {\n            currentDiscussionFound = true;\n          }\n        }\n      }\n\n      nextUnresolvedDiscussionId = nextUnresolvedDiscussionId || firstUnresolvedDiscussionId;\n\n      if (!nextUnresolvedDiscussionId) {\n        return;\n      }\n\n      var $target = $(discussionsSelector + '[data-discussion-id=\"' + nextUnresolvedDiscussionId + '\"]');\n\n      if (activeTab === 'notes') {\n        $target = $target.closest('.note-discussion');\n\n        // If the next discussion is closed, toggle it open.\n        if ($target.find('.js-toggle-content').is(':hidden')) {\n          $target.find('.js-toggle-button i').trigger('click');\n        }\n      } else if (activeTab === 'diffs') {\n        // Resolved discussions are hidden in the diffs tab by default.\n        // If they are marked unresolved on the notes tab, they will still be hidden on the diffs tab.\n        // When jumping between unresolved discussions on the diffs tab, we show them.\n        $target.closest(\".content\").show();\n\n        $target = $target.closest(\"tr.notes_holder\");\n        $target.show();\n\n        // If we are on the diffs tab, we don't scroll to the discussion itself, but to\n        // 4 diff lines above it: the line the discussion was in response to + 3 context\n        var prevEl = void 0;\n        for (var _i2 = 0; _i2 < 4; _i2 += 1) {\n          prevEl = $target.prev();\n\n          // If the discussion doesn't have 4 lines above it, we'll have to do with fewer.\n          if (!prevEl.hasClass(\"line_holder\")) {\n            break;\n          }\n\n          $target = prevEl;\n        }\n      }\n\n      $.scrollTo($target, {\n        offset: 0\n      });\n    }\n  },\n  created: function created() {\n    this.discussion = this.discussions[this.discussionId];\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('jump-to-discussion', JumpToDiscussion);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/components/new_issue_for_discussion.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* global CommentsStore */\n\n\n\nvar NewIssueForDiscussion = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  props: {\n    discussionId: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      discussions: CommentsStore.state\n    };\n  },\n\n  computed: {\n    discussion: function discussion() {\n      return this.discussions[this.discussionId];\n    },\n    showButton: function showButton() {\n      if (this.discussion) return !this.discussion.isResolved();\n      return false;\n    }\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('new-issue-for-discussion-btn', NewIssueForDiscussion);\n\n/***/ }),\n\n/***/ \"./diff_notes/components/resolve_btn.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable comma-dangle, object-shorthand, func-names, quote-props, no-else-return, camelcase, no-new, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n/* global Flash */\n\n\n\nvar ResolveBtn = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  props: {\n    noteId: Number,\n    discussionId: String,\n    resolved: Boolean,\n    canResolve: Boolean,\n    resolvedBy: String,\n    authorName: String,\n    authorAvatar: String,\n    noteTruncated: String\n  },\n  data: function data() {\n    return {\n      discussions: CommentsStore.state,\n      loading: false\n    };\n  },\n  watch: {\n    'discussions': {\n      handler: 'updateTooltip',\n      deep: true\n    }\n  },\n  computed: {\n    discussion: function discussion() {\n      return this.discussions[this.discussionId];\n    },\n    note: function note() {\n      return this.discussion ? this.discussion.getNote(this.noteId) : {};\n    },\n    buttonText: function buttonText() {\n      if (this.isResolved) {\n        return 'Resolved by ' + this.resolvedByName;\n      } else if (this.canResolve) {\n        return 'Mark as resolved';\n      } else {\n        return 'Unable to resolve';\n      }\n    },\n    isResolved: function isResolved() {\n      if (this.note) {\n        return this.note.resolved;\n      } else {\n        return false;\n      }\n    },\n    resolvedByName: function resolvedByName() {\n      return this.note.resolved_by;\n    }\n  },\n  methods: {\n    updateTooltip: function updateTooltip() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        $(_this.$refs.button).tooltip('hide').tooltip('fixTitle');\n      });\n    },\n    resolve: function resolve() {\n      var _this2 = this;\n\n      var errorFlashMsg = 'An error occurred when trying to resolve a comment. Please try again.';\n\n      if (!this.canResolve) return;\n\n      var promise = void 0;\n      this.loading = true;\n\n      if (this.isResolved) {\n        promise = ResolveService.unresolve(this.noteId);\n      } else {\n        promise = ResolveService.resolve(this.noteId);\n      }\n\n      promise.then(function (response) {\n        _this2.loading = false;\n\n        if (response.status === 200) {\n          var data = response.json();\n          var resolved_by = data ? data.resolved_by : null;\n\n          CommentsStore.update(_this2.discussionId, _this2.noteId, !_this2.isResolved, resolved_by);\n          _this2.discussion.updateHeadline(data);\n          gl.mrWidget.checkStatus();\n        } else {\n          new Flash(errorFlashMsg);\n        }\n\n        _this2.updateTooltip();\n      }).catch(function () {\n        new Flash(errorFlashMsg);\n      });\n    }\n  },\n  mounted: function mounted() {\n    $(this.$refs.button).tooltip({\n      container: 'body'\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    CommentsStore.delete(this.discussionId, this.noteId);\n  },\n  created: function created() {\n    CommentsStore.create({\n      discussionId: this.discussionId,\n      noteId: this.noteId,\n      canResolve: this.canResolve,\n      resolved: this.resolved,\n      resolvedBy: this.resolvedBy,\n      authorName: this.authorName,\n      authorAvatar: this.authorAvatar,\n      noteTruncated: this.noteTruncated\n    });\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('resolve-btn', ResolveBtn);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/components/resolve_count.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable comma-dangle, object-shorthand, func-names, no-param-reassign */\n/* global DiscussionMixins */\n/* global CommentsStore */\n\n\n\nwindow.ResolveCount = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  mixins: [DiscussionMixins],\n  props: {\n    loggedOut: Boolean\n  },\n  data: function data() {\n    return {\n      discussions: CommentsStore.state\n    };\n  },\n  computed: {\n    allResolved: function allResolved() {\n      return this.resolvedDiscussionCount === this.discussionCount;\n    },\n    resolvedCountText: function resolvedCountText() {\n      return this.discussionCount === 1 ? 'discussion' : 'discussions';\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./diff_notes/components/resolve_discussion_btn.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable object-shorthand, func-names, space-before-function-paren, comma-dangle, no-else-return, quotes, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n\n\n\nvar ResolveDiscussionBtn = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n  props: {\n    discussionId: String,\n    mergeRequestId: Number,\n    canResolve: Boolean\n  },\n  data: function data() {\n    return {\n      discussion: {}\n    };\n  },\n  computed: {\n    showButton: function showButton() {\n      if (this.discussion) {\n        return this.discussion.isResolvable();\n      } else {\n        return false;\n      }\n    },\n    isDiscussionResolved: function isDiscussionResolved() {\n      if (this.discussion) {\n        return this.discussion.isResolved();\n      } else {\n        return false;\n      }\n    },\n    buttonText: function buttonText() {\n      if (this.isDiscussionResolved) {\n        return \"Unresolve discussion\";\n      } else {\n        return \"Resolve discussion\";\n      }\n    },\n    loading: function loading() {\n      if (this.discussion) {\n        return this.discussion.loading;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    resolve: function resolve() {\n      ResolveService.toggleResolveForDiscussion(this.mergeRequestId, this.discussionId);\n    }\n  },\n  created: function created() {\n    CommentsStore.createDiscussion(this.discussionId, this.canResolve);\n\n    this.discussion = CommentsStore.state[this.discussionId];\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('resolve-discussion-btn', ResolveDiscussionBtn);\n\n/***/ }),\n\n/***/ \"./diff_notes/diff_notes_bundle.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_discussion__ = __webpack_require__(\"./diff_notes/models/discussion.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_note__ = __webpack_require__(\"./diff_notes/models/note.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_note___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__models_note__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__stores_comments__ = __webpack_require__(\"./diff_notes/stores/comments.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_resolve__ = __webpack_require__(\"./diff_notes/services/resolve.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mixins_discussion__ = __webpack_require__(\"./diff_notes/mixins/discussion.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mixins_discussion___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__mixins_discussion__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_comment_resolve_btn__ = __webpack_require__(\"./diff_notes/components/comment_resolve_btn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_jump_to_discussion__ = __webpack_require__(\"./diff_notes/components/jump_to_discussion.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_resolve_btn__ = __webpack_require__(\"./diff_notes/components/resolve_btn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_resolve_count__ = __webpack_require__(\"./diff_notes/components/resolve_count.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_resolve_discussion_btn__ = __webpack_require__(\"./diff_notes/components/resolve_discussion_btn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__components_diff_note_avatars__ = __webpack_require__(\"./diff_notes/components/diff_note_avatars.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__components_new_issue_for_discussion__ = __webpack_require__(\"./diff_notes/components/new_issue_for_discussion.js\");\n/* eslint-disable func-names, comma-dangle, new-cap, no-new, max-len */\n/* global ResolveCount */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$(function () {\n  var projectPath = document.querySelector('.merge-request').dataset.projectPath;\n  var COMPONENT_SELECTOR = 'resolve-btn, resolve-discussion-btn, jump-to-discussion, comment-and-resolve-btn, new-issue-for-discussion-btn';\n\n  window.gl = window.gl || {};\n  window.gl.diffNoteApps = {};\n\n  window.ResolveService = new gl.DiffNotesResolveServiceClass(projectPath);\n\n  gl.diffNotesCompileComponents = function () {\n    $('diff-note-avatars').each(function () {\n      var tmp = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n        template: $(this).get(0).outerHTML\n      });\n      var tmpApp = new tmp().$mount();\n\n      $(this).replaceWith(tmpApp.$el);\n    });\n\n    var $components = $(COMPONENT_SELECTOR).filter(function () {\n      return $(this).closest('resolve-count').length !== 1;\n    });\n\n    if ($components) {\n      $components.each(function () {\n        var $this = $(this);\n        var noteId = $this.attr(':note-id');\n        var tmp = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n          template: $this.get(0).outerHTML\n        });\n        var tmpApp = new tmp().$mount();\n\n        if (noteId) {\n          gl.diffNoteApps['note_' + noteId] = tmpApp;\n        }\n\n        $this.replaceWith(tmpApp.$el);\n      });\n    }\n  };\n\n  gl.diffNotesCompileComponents();\n\n  new __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n    el: '#resolve-count-app',\n    components: {\n      'resolve-count': ResolveCount\n    }\n  });\n\n  $(window).trigger('resize.nav');\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/icons/collapse_icon.svg\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg width=\\\"11\\\" height=\\\"11\\\" viewBox=\\\"0 0 9 13\\\"><path d=\\\"M2.57568253,6.49866948 C2.50548852,6.57199715 2.44637866,6.59708255 2.39835118,6.57392645 C2.3503237,6.55077034 2.32631032,6.48902165 2.32631032,6.38867852 L2.32631032,-2.13272614 C2.32631032,-2.23306927 2.3503237,-2.29481796 2.39835118,-2.31797406 C2.44637866,-2.34113017 2.50548852,-2.31604477 2.57568253,-2.24271709 L6.51022184,1.86747129 C6.53977721,1.8983461 6.56379059,1.93500939 6.5822627,1.97746225 L6.5822627,2.27849013 C6.56379059,2.31708364 6.53977721,2.35374693 6.51022184,2.38848109 L2.57568253,6.49866948 Z\\\" transform=\\\"translate(4.454287, 2.127976) rotate(90.000000) translate(-4.454287, -2.127976) \\\"></path><path d=\\\"M3.74312342,2.09553332 C3.74312342,1.99519019 3.77821989,1.9083561 3.8484139,1.83502843 C3.91860791,1.76170075 4.00173115,1.72503747 4.09778611,1.72503747 L4.80711151,1.72503747 C4.90316647,1.72503747 4.98628971,1.76170075 5.05648372,1.83502843 C5.12667773,1.9083561 5.16177421,1.99519019 5.16177421,2.09553332 L5.16177421,10.2464421 C5.16177421,10.3467853 5.12667773,10.4336194 5.05648372,10.506947 C4.98628971,10.5802747 4.90316647,10.616938 4.80711151,10.616938 L4.09778611,10.616938 C4.00173115,10.616938 3.91860791,10.5802747 3.8484139,10.506947 C3.77821989,10.4336194 3.74312342,10.3467853 3.74312342,10.2464421 L3.74312342,2.09553332 Z\\\" transform=\\\"translate(4.452449, 6.170988) rotate(-90.000000) translate(-4.452449, -6.170988) \\\"></path><path d=\\\"M2.57568253,14.6236695 C2.50548852,14.6969971 2.44637866,14.7220826 2.39835118,14.6989264 C2.3503237,14.6757703 2.32631032,14.6140216 2.32631032,14.5136785 L2.32631032,5.99227386 C2.32631032,5.89193073 2.3503237,5.83018204 2.39835118,5.80702594 C2.44637866,5.78386983 2.50548852,5.80895523 2.57568253,5.88228291 L6.51022184,9.99247129 C6.53977721,10.0233461 6.56379059,10.0600094 6.5822627,10.1024622 L6.5822627,10.4034901 C6.56379059,10.4420836 6.53977721,10.4787469 6.51022184,10.5134811 L2.57568253,14.6236695 Z\\\" transform=\\\"translate(4.454287, 10.252976) scale(1, -1) rotate(90.000000) translate(-4.454287, -10.252976) \\\"></path></svg>\\n\"\n\n/***/ }),\n\n/***/ \"./diff_notes/mixins/discussion.js\":\n/***/ (function(module, exports) {\n\n/* eslint-disable object-shorthand, func-names, guard-for-in, no-restricted-syntax, comma-dangle, no-param-reassign, max-len */\n\nwindow.DiscussionMixins = {\n  computed: {\n    discussionCount: function discussionCount() {\n      return Object.keys(this.discussions).length;\n    },\n    resolvedDiscussionCount: function resolvedDiscussionCount() {\n      var resolvedCount = 0;\n\n      for (var discussionId in this.discussions) {\n        var discussion = this.discussions[discussionId];\n\n        if (discussion.isResolved()) {\n          resolvedCount += 1;\n        }\n      }\n\n      return resolvedCount;\n    },\n    unresolvedDiscussionCount: function unresolvedDiscussionCount() {\n      var unresolvedCount = 0;\n\n      for (var discussionId in this.discussions) {\n        var discussion = this.discussions[discussionId];\n\n        if (!discussion.isResolved()) {\n          unresolvedCount += 1;\n        }\n      }\n\n      return unresolvedCount;\n    }\n  }\n};\n\n/***/ }),\n\n/***/ \"./diff_notes/models/discussion.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable space-before-function-paren, camelcase, guard-for-in, no-restricted-syntax, no-unused-vars, max-len */\n/* global NoteModel */\n\n\n\nvar DiscussionModel = function () {\n  function DiscussionModel(discussionId) {\n    _classCallCheck(this, DiscussionModel);\n\n    this.id = discussionId;\n    this.notes = {};\n    this.loading = false;\n    this.canResolve = false;\n  }\n\n  _createClass(DiscussionModel, [{\n    key: 'createNote',\n    value: function createNote(noteObj) {\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].set(this.notes, noteObj.noteId, new NoteModel(this.id, noteObj));\n    }\n  }, {\n    key: 'deleteNote',\n    value: function deleteNote(noteId) {\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].delete(this.notes, noteId);\n    }\n  }, {\n    key: 'getNote',\n    value: function getNote(noteId) {\n      return this.notes[noteId];\n    }\n  }, {\n    key: 'notesCount',\n    value: function notesCount() {\n      return Object.keys(this.notes).length;\n    }\n  }, {\n    key: 'isResolved',\n    value: function isResolved() {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (!note.resolved) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'resolveAllNotes',\n    value: function resolveAllNotes(resolved_by) {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (!note.resolved) {\n          note.resolved = true;\n          note.resolved_by = resolved_by;\n        }\n      }\n    }\n  }, {\n    key: 'unResolveAllNotes',\n    value: function unResolveAllNotes() {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (note.resolved) {\n          note.resolved = false;\n          note.resolved_by = null;\n        }\n      }\n    }\n  }, {\n    key: 'updateHeadline',\n    value: function updateHeadline(data) {\n      var discussionSelector = '.discussion[data-discussion-id=\"' + this.id + '\"]';\n      var $discussionHeadline = $(discussionSelector + ' .js-discussion-headline');\n\n      if (data.discussion_headline_html) {\n        if ($discussionHeadline.length) {\n          $discussionHeadline.replaceWith(data.discussion_headline_html);\n        } else {\n          $(discussionSelector + ' .discussion-header').append(data.discussion_headline_html);\n        }\n\n        gl.utils.localTimeAgo($('.js-timeago', '' + discussionSelector));\n      } else {\n        $discussionHeadline.remove();\n      }\n    }\n  }, {\n    key: 'isResolvable',\n    value: function isResolvable() {\n      if (!this.canResolve) {\n        return false;\n      }\n\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (note.canResolve) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return DiscussionModel;\n}();\n\nwindow.DiscussionModel = DiscussionModel;\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./diff_notes/models/note.js\":\n/***/ (function(module, exports) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable camelcase, no-unused-vars */\n\nvar NoteModel = function NoteModel(discussionId, noteObj) {\n  _classCallCheck(this, NoteModel);\n\n  this.discussionId = discussionId;\n  this.id = noteObj.noteId;\n  this.canResolve = noteObj.canResolve;\n  this.resolved = noteObj.resolved;\n  this.resolved_by = noteObj.resolvedBy;\n  this.authorName = noteObj.authorName;\n  this.authorAvatar = noteObj.authorAvatar;\n  this.noteTruncated = noteObj.noteTruncated;\n};\n\nwindow.NoteModel = NoteModel;\n\n/***/ }),\n\n/***/ \"./diff_notes/services/resolve.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vue_shared_vue_resource_interceptor__ = __webpack_require__(\"./vue_shared/vue_resource_interceptor.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable class-methods-use-this, one-var, camelcase, no-new, comma-dangle, no-param-reassign, max-len */\n/* global Flash */\n/* global CommentsStore */\n\n\n\n\nwindow.gl = window.gl || {};\n\nvar ResolveServiceClass = function () {\n  function ResolveServiceClass(root) {\n    _classCallCheck(this, ResolveServiceClass);\n\n    this.noteResource = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].resource(root + '/notes{/noteId}/resolve');\n    this.discussionResource = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].resource(root + '/merge_requests{/mergeRequestId}/discussions{/discussionId}/resolve');\n  }\n\n  _createClass(ResolveServiceClass, [{\n    key: 'resolve',\n    value: function resolve(noteId) {\n      return this.noteResource.save({ noteId: noteId }, {});\n    }\n  }, {\n    key: 'unresolve',\n    value: function unresolve(noteId) {\n      return this.noteResource.delete({ noteId: noteId }, {});\n    }\n  }, {\n    key: 'toggleResolveForDiscussion',\n    value: function toggleResolveForDiscussion(mergeRequestId, discussionId) {\n      var discussion = CommentsStore.state[discussionId];\n      var isResolved = discussion.isResolved();\n      var promise = void 0;\n\n      if (isResolved) {\n        promise = this.unResolveAll(mergeRequestId, discussionId);\n      } else {\n        promise = this.resolveAll(mergeRequestId, discussionId);\n      }\n\n      promise.then(function (response) {\n        discussion.loading = false;\n\n        if (response.status === 200) {\n          var data = response.json();\n          var resolved_by = data ? data.resolved_by : null;\n\n          if (isResolved) {\n            discussion.unResolveAllNotes();\n          } else {\n            discussion.resolveAllNotes(resolved_by);\n          }\n\n          gl.mrWidget.checkStatus();\n          discussion.updateHeadline(data);\n        } else {\n          throw new Error('An error occurred when trying to resolve discussion.');\n        }\n      }).catch(function () {\n        new Flash('An error occurred when trying to resolve a discussion. Please try again.');\n      });\n    }\n  }, {\n    key: 'resolveAll',\n    value: function resolveAll(mergeRequestId, discussionId) {\n      var discussion = CommentsStore.state[discussionId];\n\n      discussion.loading = true;\n\n      return this.discussionResource.save({\n        mergeRequestId: mergeRequestId,\n        discussionId: discussionId\n      }, {});\n    }\n  }, {\n    key: 'unResolveAll',\n    value: function unResolveAll(mergeRequestId, discussionId) {\n      var discussion = CommentsStore.state[discussionId];\n\n      discussion.loading = true;\n\n      return this.discussionResource.delete({\n        mergeRequestId: mergeRequestId,\n        discussionId: discussionId\n      }, {});\n    }\n  }]);\n\n  return ResolveServiceClass;\n}();\n\ngl.DiffNotesResolveServiceClass = ResolveServiceClass;\n\n/***/ }),\n\n/***/ \"./diff_notes/stores/comments.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* eslint-disable object-shorthand, func-names, camelcase, no-restricted-syntax, guard-for-in, comma-dangle, max-len, no-param-reassign */\n/* global DiscussionModel */\n\n\n\nwindow.CommentsStore = {\n  state: {},\n  get: function get(discussionId, noteId) {\n    return this.state[discussionId].getNote(noteId);\n  },\n  createDiscussion: function createDiscussion(discussionId, canResolve) {\n    var discussion = this.state[discussionId];\n    if (!this.state[discussionId]) {\n      discussion = new DiscussionModel(discussionId);\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].set(this.state, discussionId, discussion);\n    }\n\n    if (canResolve !== undefined) {\n      discussion.canResolve = canResolve;\n    }\n\n    return discussion;\n  },\n  create: function create(noteObj) {\n    var discussion = this.createDiscussion(noteObj.discussionId);\n\n    discussion.createNote(noteObj);\n  },\n  update: function update(discussionId, noteId, resolved, resolved_by) {\n    var discussion = this.state[discussionId];\n    var note = discussion.getNote(noteId);\n    note.resolved = resolved;\n    note.resolved_by = resolved_by;\n  },\n  delete: function _delete(discussionId, noteId) {\n    var discussion = this.state[discussionId];\n    discussion.deleteNote(noteId);\n\n    if (discussion.notesCount() === 0) {\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].delete(this.state, discussionId);\n    }\n  },\n  unresolvedDiscussionIds: function unresolvedDiscussionIds() {\n    var ids = [];\n\n    for (var discussionId in this.state) {\n      var discussion = this.state[discussionId];\n\n      if (!discussion.isResolved()) {\n        ids.push(discussion.id);\n      }\n    }\n\n    return ids;\n  }\n};\n\n/***/ })\n\n},[\"./diff_notes/diff_notes_bundle.js\"]);\n\n\n// WEBPACK FOOTER //\n// diff_notes.e3bfe77d00b2c044ee8f.bundle.js","// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  scopeId,\n  cssModules\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  // inject cssModules\n  if (cssModules) {\n    var computed = Object.create(options.computed || null)\n    Object.keys(cssModules).forEach(function (key) {\n      var module = cssModules[key]\n      computed[key] = function () { return module }\n    })\n    options.computed = computed\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /var/cache/omnibus/src/gitlab-rails/~/vue-loader/lib/component-normalizer.js\n// module id = ../../../node_modules/vue-loader/lib/component-normalizer.js\n// module chunks = groups vue_merge_request_widget commit_pipelines deploy_keys diff_notes environments environments_folder boards issue_show notebook_viewer pdf_viewer pipelines pipelines_details cycle_analytics","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAAAAAAdJSU2AAACNElEQVR4AdXYBa7jMBCA4b3/JZahzIkjp2qt+BWUWnG5ln2XxaJJb2b5F2ukL4wvzK/rP7bUcbf92u6oftLSe1ldk8efsfaVeEjusZZeC6e1RllaCk/yG6ag1lZ4WwPX69uyD6tAe/g2ipAlNMRS37awDLaFrpcMWxXQOi0jnWCWjFkSZomYJWDWKmatYNZyEWkJsvQimoZYah5NgdaLxagCtF6GRy0DshZPkeYwS/KIJWGWYjwYUzDLxCwDtJ54OKglimBLqHWahii2g1pmHLLGBmwVoRjcKlmgOdw65H5qKuGWCVi5Qlhs6m1sENZi4q3AWNvca5UYy2RjT/SAsiZey6CsIvc0wVlV5lJ0ibPMyLUGCmlxQq0IM0hLdWyro7CWEc3sXsqaK4O2zLxOsmtpfW5Q1u68ZrVmepaaNXEewawtI9X5Xl3U3n1qND6+rfPzvqoIWz/fklNCSLY153YV53J/XUxGCJnKZ1lajsn3/Ffegf6Y5pV2LUsSNL2UHzxUfh3TlYpZqqTpXZm0KZk9zJcqaEmaWPHDw0pxe05K7bWOLHFLWXVetqpYmrjle4+1y0aBaF4UOQ1NU+lYezJClkjLUnSEjqhH6zjAW4OjtY39Ibq+sawUb6W2RQfoqG0VeKuwrRJvlba17faRdbe2pTtYq6Nty/S7yAbGsQjWIq41wVoT1+IdZNy1djUcVdu5lklQWC0xHkt1X31qNEE1Pr3qKv/9XiSNj6Aaifj3/69+AYujsR/MvkpZAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../images/no_avatar.png\n// module id = ../images/no_avatar.png\n// module chunks = boards cycle_analytics commit_pipelines diff_notes environments environments_folder pipelines pipelines_details","/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, quotes, no-lonely-if, max-len */\n/* global CommentsStore */\n\nimport Vue from 'vue';\n\nconst CommentAndResolveBtn = Vue.extend({\n  props: {\n    discussionId: String,\n  },\n  data() {\n    return {\n      textareaIsEmpty: true,\n      discussion: {},\n    };\n  },\n  computed: {\n    showButton: function () {\n      if (this.discussion) {\n        return this.discussion.isResolvable();\n      } else {\n        return false;\n      }\n    },\n    isDiscussionResolved: function () {\n      return this.discussion.isResolved();\n    },\n    buttonText: function () {\n      if (this.isDiscussionResolved) {\n        if (this.textareaIsEmpty) {\n          return \"Unresolve discussion\";\n        } else {\n          return \"Comment & unresolve discussion\";\n        }\n      } else {\n        if (this.textareaIsEmpty) {\n          return \"Resolve discussion\";\n        } else {\n          return \"Comment & resolve discussion\";\n        }\n      }\n    }\n  },\n  created() {\n    if (this.discussionId) {\n      this.discussion = CommentsStore.state[this.discussionId];\n    }\n  },\n  mounted: function () {\n    if (!this.discussionId) return;\n\n    const $textarea = $(`.js-discussion-note-form[data-discussion-id=${this.discussionId}] .note-textarea`);\n    this.textareaIsEmpty = $textarea.val() === '';\n\n    $textarea.on('input.comment-and-resolve-btn', () => {\n      this.textareaIsEmpty = $textarea.val() === '';\n    });\n  },\n  destroyed: function () {\n    if (!this.discussionId) return;\n\n    $(`.js-discussion-note-form[data-discussion-id=${this.discussionId}] .note-textarea`).off('input.comment-and-resolve-btn');\n  }\n});\n\nVue.component('comment-and-resolve-btn', CommentAndResolveBtn);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/comment_resolve_btn.js","/* global CommentsStore */\n/* global notes */\n\nimport Vue from 'vue';\nimport collapseIcon from '../icons/collapse_icon.svg';\nimport userAvatarImage from '../../vue_shared/components/user_avatar/user_avatar_image.vue';\n\nconst DiffNoteAvatars = Vue.extend({\n  props: ['discussionId'],\n  data() {\n    return {\n      isVisible: false,\n      lineType: '',\n      storeState: CommentsStore.state,\n      shownAvatars: 3,\n      collapseIcon,\n    };\n  },\n  components: {\n    userAvatarImage,\n  },\n  template: `\n    <div class=\"diff-comment-avatar-holders\"\n      v-show=\"notesCount !== 0\">\n      <div v-if=\"!isVisible\">\n        <!-- FIXME: Pass an alt attribute here for accessibility -->\n        <user-avatar-image\n          v-for=\"note in notesSubset\"\n          class=\"diff-comment-avatar js-diff-comment-avatar\"\n          @click.native=\"clickedAvatar($event)\"\n          :img-src=\"note.authorAvatar\"\n          :tooltip-text=\"getTooltipText(note)\"\n          :data-line-type=\"lineType\"\n          :size=\"19\"\n          data-html=\"true\"\n        />\n        <span v-if=\"notesCount > shownAvatars\"\n          class=\"diff-comments-more-count has-tooltip js-diff-comment-avatar\"\n          data-container=\"body\"\n          data-placement=\"top\"\n          ref=\"extraComments\"\n          role=\"button\"\n          :data-line-type=\"lineType\"\n          :title=\"extraNotesTitle\"\n          @click=\"clickedAvatar($event)\">{{ moreText }}</span>\n      </div>\n      <button class=\"diff-notes-collapse js-diff-comment-avatar\"\n        type=\"button\"\n        aria-label=\"Show comments\"\n        :data-line-type=\"lineType\"\n        @click=\"clickedAvatar($event)\"\n        v-if=\"isVisible\"\n        v-html=\"collapseIcon\">\n      </button>\n    </div>\n  `,\n  mounted() {\n    this.$nextTick(() => {\n      this.addNoCommentClass();\n      this.setDiscussionVisible();\n\n      this.lineType = $(this.$el).closest('.diff-line-num').hasClass('old_line') ? 'old' : 'new';\n    });\n\n    $(document).on('toggle.comments', () => {\n      this.$nextTick(() => {\n        this.setDiscussionVisible();\n      });\n    });\n  },\n  destroyed() {\n    $(document).off('toggle.comments');\n  },\n  watch: {\n    storeState: {\n      handler() {\n        this.$nextTick(() => {\n          $('.has-tooltip', this.$el).tooltip('fixTitle');\n\n          // We need to add/remove a class to an element that is outside the Vue instance\n          this.addNoCommentClass();\n        });\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    notesSubset() {\n      let notes = [];\n\n      if (this.discussion) {\n        notes = Object.keys(this.discussion.notes)\n          .slice(0, this.shownAvatars)\n          .map(noteId => this.discussion.notes[noteId]);\n      }\n\n      return notes;\n    },\n    extraNotesTitle() {\n      if (this.discussion) {\n        const extra = this.discussion.notesCount() - this.shownAvatars;\n\n        return `${extra} more comment${extra > 1 ? 's' : ''}`;\n      }\n\n      return '';\n    },\n    discussion() {\n      return this.storeState[this.discussionId];\n    },\n    notesCount() {\n      if (this.discussion) {\n        return this.discussion.notesCount();\n      }\n\n      return 0;\n    },\n    moreText() {\n      const plusSign = this.notesCount < 100 ? '+' : '';\n\n      return `${plusSign}${this.notesCount - this.shownAvatars}`;\n    },\n  },\n  methods: {\n    clickedAvatar(e) {\n      notes.onAddDiffNote(e);\n\n      // Toggle the active state of the toggle all button\n      this.toggleDiscussionsToggleState();\n\n      this.$nextTick(() => {\n        this.setDiscussionVisible();\n\n        $('.has-tooltip', this.$el).tooltip('fixTitle');\n        $('.has-tooltip', this.$el).tooltip('hide');\n      });\n    },\n    addNoCommentClass() {\n      const notesCount = this.notesCount;\n\n      $(this.$el).closest('.js-avatar-container')\n        .toggleClass('js-no-comment-btn', notesCount > 0)\n        .nextUntil('.js-avatar-container')\n        .toggleClass('js-no-comment-btn', notesCount > 0);\n    },\n    toggleDiscussionsToggleState() {\n      const $notesHolders = $(this.$el).closest('.code').find('.notes_holder');\n      const $visibleNotesHolders = $notesHolders.filter(':visible');\n      const $toggleDiffCommentsBtn = $(this.$el).closest('.diff-file').find('.js-toggle-diff-comments');\n\n      $toggleDiffCommentsBtn.toggleClass('active', $notesHolders.length === $visibleNotesHolders.length);\n    },\n    setDiscussionVisible() {\n      this.isVisible = $(`.diffs .notes[data-discussion-id=\"${this.discussion.id}\"]`).is(':visible');\n    },\n    getTooltipText(note) {\n      return `${note.authorName}: ${note.noteTruncated}`;\n    },\n  },\n});\n\nVue.component('diff-note-avatars', DiffNoteAvatars);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/diff_note_avatars.js","/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, guard-for-in, no-restricted-syntax, one-var, space-before-function-paren, no-lonely-if, no-continue, brace-style, max-len, quotes */\n/* global DiscussionMixins */\n/* global CommentsStore */\n\nimport Vue from 'vue';\n\nconst JumpToDiscussion = Vue.extend({\n  mixins: [DiscussionMixins],\n  props: {\n    discussionId: String\n  },\n  data: function () {\n    return {\n      discussions: CommentsStore.state,\n      discussion: {},\n    };\n  },\n  computed: {\n    buttonText: function () {\n      if (this.discussionId) {\n        return 'Jump to next unresolved discussion';\n      } else {\n        return 'Jump to first unresolved discussion';\n      }\n    },\n    allResolved: function () {\n      return this.unresolvedDiscussionCount === 0;\n    },\n    showButton: function () {\n      if (this.discussionId) {\n        if (this.unresolvedDiscussionCount > 1) {\n          return true;\n        } else {\n          return this.discussionId !== this.lastResolvedId;\n        }\n      } else {\n        return this.unresolvedDiscussionCount >= 1;\n      }\n    },\n    lastResolvedId: function () {\n      let lastId;\n      for (const discussionId in this.discussions) {\n        const discussion = this.discussions[discussionId];\n\n        if (!discussion.isResolved()) {\n          lastId = discussion.id;\n        }\n      }\n      return lastId;\n    }\n  },\n  methods: {\n    jumpToNextUnresolvedDiscussion: function () {\n      let discussionsSelector;\n      let discussionIdsInScope;\n      let firstUnresolvedDiscussionId;\n      let nextUnresolvedDiscussionId;\n      let activeTab = window.mrTabs.currentAction;\n      let hasDiscussionsToJumpTo = true;\n      let jumpToFirstDiscussion = !this.discussionId;\n\n      const discussionIdsForElements = function(elements) {\n        return elements.map(function() {\n          return $(this).attr('data-discussion-id');\n        }).toArray();\n      };\n\n      const discussions = this.discussions;\n\n      if (activeTab === 'diffs') {\n        discussionsSelector = '.diffs .notes[data-discussion-id]';\n        discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n\n        let unresolvedDiscussionCount = 0;\n\n        for (let i = 0; i < discussionIdsInScope.length; i += 1) {\n          const discussionId = discussionIdsInScope[i];\n          const discussion = discussions[discussionId];\n          if (discussion && !discussion.isResolved()) {\n            unresolvedDiscussionCount += 1;\n          }\n        }\n\n        if (this.discussionId && !this.discussion.isResolved()) {\n          // If this is the last unresolved discussion on the diffs tab,\n          // there are no discussions to jump to.\n          if (unresolvedDiscussionCount === 1) {\n            hasDiscussionsToJumpTo = false;\n          }\n        } else {\n          // If there are no unresolved discussions on the diffs tab at all,\n          // there are no discussions to jump to.\n          if (unresolvedDiscussionCount === 0) {\n            hasDiscussionsToJumpTo = false;\n          }\n        }\n      } else if (activeTab !== 'notes') {\n        // If we are on the commits or builds tabs,\n        // there are no discussions to jump to.\n        hasDiscussionsToJumpTo = false;\n      }\n\n      if (!hasDiscussionsToJumpTo) {\n        // If there are no discussions to jump to on the current page,\n        // switch to the notes tab and jump to the first disucssion there.\n        window.mrTabs.activateTab('notes');\n        activeTab = 'notes';\n        jumpToFirstDiscussion = true;\n      }\n\n      if (activeTab === 'notes') {\n        discussionsSelector = '.discussion[data-discussion-id]';\n        discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n      }\n\n      let currentDiscussionFound = false;\n      for (let i = 0; i < discussionIdsInScope.length; i += 1) {\n        const discussionId = discussionIdsInScope[i];\n        const discussion = discussions[discussionId];\n\n        if (!discussion) {\n          // Discussions for comments on commits in this MR don't have a resolved status.\n          continue;\n        }\n\n        if (!firstUnresolvedDiscussionId && !discussion.isResolved()) {\n          firstUnresolvedDiscussionId = discussionId;\n\n          if (jumpToFirstDiscussion) {\n            break;\n          }\n        }\n\n        if (!jumpToFirstDiscussion) {\n          if (currentDiscussionFound) {\n            if (!discussion.isResolved()) {\n              nextUnresolvedDiscussionId = discussionId;\n              break;\n            }\n            else {\n              continue;\n            }\n          }\n\n          if (discussionId === this.discussionId) {\n            currentDiscussionFound = true;\n          }\n        }\n      }\n\n      nextUnresolvedDiscussionId = nextUnresolvedDiscussionId || firstUnresolvedDiscussionId;\n\n      if (!nextUnresolvedDiscussionId) {\n        return;\n      }\n\n      let $target = $(`${discussionsSelector}[data-discussion-id=\"${nextUnresolvedDiscussionId}\"]`);\n\n      if (activeTab === 'notes') {\n        $target = $target.closest('.note-discussion');\n\n        // If the next discussion is closed, toggle it open.\n        if ($target.find('.js-toggle-content').is(':hidden')) {\n          $target.find('.js-toggle-button i').trigger('click');\n        }\n      } else if (activeTab === 'diffs') {\n        // Resolved discussions are hidden in the diffs tab by default.\n        // If they are marked unresolved on the notes tab, they will still be hidden on the diffs tab.\n        // When jumping between unresolved discussions on the diffs tab, we show them.\n        $target.closest(\".content\").show();\n\n        $target = $target.closest(\"tr.notes_holder\");\n        $target.show();\n\n        // If we are on the diffs tab, we don't scroll to the discussion itself, but to\n        // 4 diff lines above it: the line the discussion was in response to + 3 context\n        let prevEl;\n        for (let i = 0; i < 4; i += 1) {\n          prevEl = $target.prev();\n\n          // If the discussion doesn't have 4 lines above it, we'll have to do with fewer.\n          if (!prevEl.hasClass(\"line_holder\")) {\n            break;\n          }\n\n          $target = prevEl;\n        }\n      }\n\n      $.scrollTo($target, {\n        offset: 0\n      });\n    }\n  },\n  created() {\n    this.discussion = this.discussions[this.discussionId];\n  },\n});\n\nVue.component('jump-to-discussion', JumpToDiscussion);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/jump_to_discussion.js","/* global CommentsStore */\n\nimport Vue from 'vue';\n\nconst NewIssueForDiscussion = Vue.extend({\n  props: {\n    discussionId: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      discussions: CommentsStore.state,\n    };\n  },\n  computed: {\n    discussion() {\n      return this.discussions[this.discussionId];\n    },\n    showButton() {\n      if (this.discussion) return !this.discussion.isResolved();\n      return false;\n    },\n  },\n});\n\nVue.component('new-issue-for-discussion-btn', NewIssueForDiscussion);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/new_issue_for_discussion.js","/* eslint-disable comma-dangle, object-shorthand, func-names, quote-props, no-else-return, camelcase, no-new, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n/* global Flash */\n\nimport Vue from 'vue';\n\nconst ResolveBtn = Vue.extend({\n  props: {\n    noteId: Number,\n    discussionId: String,\n    resolved: Boolean,\n    canResolve: Boolean,\n    resolvedBy: String,\n    authorName: String,\n    authorAvatar: String,\n    noteTruncated: String,\n  },\n  data: function () {\n    return {\n      discussions: CommentsStore.state,\n      loading: false\n    };\n  },\n  watch: {\n    'discussions': {\n      handler: 'updateTooltip',\n      deep: true\n    }\n  },\n  computed: {\n    discussion: function () {\n      return this.discussions[this.discussionId];\n    },\n    note: function () {\n      return this.discussion ? this.discussion.getNote(this.noteId) : {};\n    },\n    buttonText: function () {\n      if (this.isResolved) {\n        return `Resolved by ${this.resolvedByName}`;\n      } else if (this.canResolve) {\n        return 'Mark as resolved';\n      } else {\n        return 'Unable to resolve';\n      }\n    },\n    isResolved: function () {\n      if (this.note) {\n        return this.note.resolved;\n      } else {\n        return false;\n      }\n    },\n    resolvedByName: function () {\n      return this.note.resolved_by;\n    },\n  },\n  methods: {\n    updateTooltip: function () {\n      this.$nextTick(() => {\n        $(this.$refs.button)\n          .tooltip('hide')\n          .tooltip('fixTitle');\n      });\n    },\n    resolve: function () {\n      const errorFlashMsg = 'An error occurred when trying to resolve a comment. Please try again.';\n\n      if (!this.canResolve) return;\n\n      let promise;\n      this.loading = true;\n\n      if (this.isResolved) {\n        promise = ResolveService\n          .unresolve(this.noteId);\n      } else {\n        promise = ResolveService\n          .resolve(this.noteId);\n      }\n\n      promise.then((response) => {\n        this.loading = false;\n\n        if (response.status === 200) {\n          const data = response.json();\n          const resolved_by = data ? data.resolved_by : null;\n\n          CommentsStore.update(this.discussionId, this.noteId, !this.isResolved, resolved_by);\n          this.discussion.updateHeadline(data);\n          gl.mrWidget.checkStatus();\n        } else {\n          new Flash(errorFlashMsg);\n        }\n\n        this.updateTooltip();\n      }).catch(() => {\n        new Flash(errorFlashMsg);\n      });\n    }\n  },\n  mounted: function () {\n    $(this.$refs.button).tooltip({\n      container: 'body'\n    });\n  },\n  beforeDestroy: function () {\n    CommentsStore.delete(this.discussionId, this.noteId);\n  },\n  created: function () {\n    CommentsStore.create({\n      discussionId: this.discussionId,\n      noteId: this.noteId,\n      canResolve: this.canResolve,\n      resolved: this.resolved,\n      resolvedBy: this.resolvedBy,\n      authorName: this.authorName,\n      authorAvatar: this.authorAvatar,\n      noteTruncated: this.noteTruncated,\n    });\n  }\n});\n\nVue.component('resolve-btn', ResolveBtn);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_btn.js","/* eslint-disable comma-dangle, object-shorthand, func-names, no-param-reassign */\n/* global DiscussionMixins */\n/* global CommentsStore */\n\nimport Vue from 'vue';\n\nwindow.ResolveCount = Vue.extend({\n  mixins: [DiscussionMixins],\n  props: {\n    loggedOut: Boolean\n  },\n  data: function () {\n    return {\n      discussions: CommentsStore.state\n    };\n  },\n  computed: {\n    allResolved: function () {\n      return this.resolvedDiscussionCount === this.discussionCount;\n    },\n    resolvedCountText() {\n      return this.discussionCount === 1 ? 'discussion' : 'discussions';\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_count.js","/* eslint-disable object-shorthand, func-names, space-before-function-paren, comma-dangle, no-else-return, quotes, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n\nimport Vue from 'vue';\n\nconst ResolveDiscussionBtn = Vue.extend({\n  props: {\n    discussionId: String,\n    mergeRequestId: Number,\n    canResolve: Boolean,\n  },\n  data: function() {\n    return {\n      discussion: {},\n    };\n  },\n  computed: {\n    showButton: function () {\n      if (this.discussion) {\n        return this.discussion.isResolvable();\n      } else {\n        return false;\n      }\n    },\n    isDiscussionResolved: function () {\n      if (this.discussion) {\n        return this.discussion.isResolved();\n      } else {\n        return false;\n      }\n    },\n    buttonText: function () {\n      if (this.isDiscussionResolved) {\n        return \"Unresolve discussion\";\n      } else {\n        return \"Resolve discussion\";\n      }\n    },\n    loading: function () {\n      if (this.discussion) {\n        return this.discussion.loading;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    resolve: function () {\n      ResolveService.toggleResolveForDiscussion(this.mergeRequestId, this.discussionId);\n    }\n  },\n  created: function () {\n    CommentsStore.createDiscussion(this.discussionId, this.canResolve);\n\n    this.discussion = CommentsStore.state[this.discussionId];\n  }\n});\n\nVue.component('resolve-discussion-btn', ResolveDiscussionBtn);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_discussion_btn.js","/* eslint-disable func-names, comma-dangle, new-cap, no-new, max-len */\n/* global ResolveCount */\n\nimport Vue from 'vue';\nimport './models/discussion';\nimport './models/note';\nimport './stores/comments';\nimport './services/resolve';\nimport './mixins/discussion';\nimport './components/comment_resolve_btn';\nimport './components/jump_to_discussion';\nimport './components/resolve_btn';\nimport './components/resolve_count';\nimport './components/resolve_discussion_btn';\nimport './components/diff_note_avatars';\nimport './components/new_issue_for_discussion';\n\n$(() => {\n  const projectPath = document.querySelector('.merge-request').dataset.projectPath;\n  const COMPONENT_SELECTOR = 'resolve-btn, resolve-discussion-btn, jump-to-discussion, comment-and-resolve-btn, new-issue-for-discussion-btn';\n\n  window.gl = window.gl || {};\n  window.gl.diffNoteApps = {};\n\n  window.ResolveService = new gl.DiffNotesResolveServiceClass(projectPath);\n\n  gl.diffNotesCompileComponents = () => {\n    $('diff-note-avatars').each(function () {\n      const tmp = Vue.extend({\n        template: $(this).get(0).outerHTML\n      });\n      const tmpApp = new tmp().$mount();\n\n      $(this).replaceWith(tmpApp.$el);\n    });\n\n    const $components = $(COMPONENT_SELECTOR).filter(function () {\n      return $(this).closest('resolve-count').length !== 1;\n    });\n\n    if ($components) {\n      $components.each(function () {\n        const $this = $(this);\n        const noteId = $this.attr(':note-id');\n        const tmp = Vue.extend({\n          template: $this.get(0).outerHTML\n        });\n        const tmpApp = new tmp().$mount();\n\n        if (noteId) {\n          gl.diffNoteApps[`note_${noteId}`] = tmpApp;\n        }\n\n        $this.replaceWith(tmpApp.$el);\n      });\n    }\n  };\n\n  gl.diffNotesCompileComponents();\n\n  new Vue({\n    el: '#resolve-count-app',\n    components: {\n      'resolve-count': ResolveCount\n    }\n  });\n\n  $(window).trigger('resize.nav');\n});\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/diff_notes_bundle.js","module.exports = \"<svg width=\\\"11\\\" height=\\\"11\\\" viewBox=\\\"0 0 9 13\\\"><path d=\\\"M2.57568253,6.49866948 C2.50548852,6.57199715 2.44637866,6.59708255 2.39835118,6.57392645 C2.3503237,6.55077034 2.32631032,6.48902165 2.32631032,6.38867852 L2.32631032,-2.13272614 C2.32631032,-2.23306927 2.3503237,-2.29481796 2.39835118,-2.31797406 C2.44637866,-2.34113017 2.50548852,-2.31604477 2.57568253,-2.24271709 L6.51022184,1.86747129 C6.53977721,1.8983461 6.56379059,1.93500939 6.5822627,1.97746225 L6.5822627,2.27849013 C6.56379059,2.31708364 6.53977721,2.35374693 6.51022184,2.38848109 L2.57568253,6.49866948 Z\\\" transform=\\\"translate(4.454287, 2.127976) rotate(90.000000) translate(-4.454287, -2.127976) \\\"></path><path d=\\\"M3.74312342,2.09553332 C3.74312342,1.99519019 3.77821989,1.9083561 3.8484139,1.83502843 C3.91860791,1.76170075 4.00173115,1.72503747 4.09778611,1.72503747 L4.80711151,1.72503747 C4.90316647,1.72503747 4.98628971,1.76170075 5.05648372,1.83502843 C5.12667773,1.9083561 5.16177421,1.99519019 5.16177421,2.09553332 L5.16177421,10.2464421 C5.16177421,10.3467853 5.12667773,10.4336194 5.05648372,10.506947 C4.98628971,10.5802747 4.90316647,10.616938 4.80711151,10.616938 L4.09778611,10.616938 C4.00173115,10.616938 3.91860791,10.5802747 3.8484139,10.506947 C3.77821989,10.4336194 3.74312342,10.3467853 3.74312342,10.2464421 L3.74312342,2.09553332 Z\\\" transform=\\\"translate(4.452449, 6.170988) rotate(-90.000000) translate(-4.452449, -6.170988) \\\"></path><path d=\\\"M2.57568253,14.6236695 C2.50548852,14.6969971 2.44637866,14.7220826 2.39835118,14.6989264 C2.3503237,14.6757703 2.32631032,14.6140216 2.32631032,14.5136785 L2.32631032,5.99227386 C2.32631032,5.89193073 2.3503237,5.83018204 2.39835118,5.80702594 C2.44637866,5.78386983 2.50548852,5.80895523 2.57568253,5.88228291 L6.51022184,9.99247129 C6.53977721,10.0233461 6.56379059,10.0600094 6.5822627,10.1024622 L6.5822627,10.4034901 C6.56379059,10.4420836 6.53977721,10.4787469 6.51022184,10.5134811 L2.57568253,14.6236695 Z\\\" transform=\\\"translate(4.454287, 10.252976) scale(1, -1) rotate(90.000000) translate(-4.454287, -10.252976) \\\"></path></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./diff_notes/icons/collapse_icon.svg\n// module id = ./diff_notes/icons/collapse_icon.svg\n// module chunks = diff_notes","/* eslint-disable object-shorthand, func-names, guard-for-in, no-restricted-syntax, comma-dangle, no-param-reassign, max-len */\n\nwindow.DiscussionMixins = {\n  computed: {\n    discussionCount: function () {\n      return Object.keys(this.discussions).length;\n    },\n    resolvedDiscussionCount: function () {\n      let resolvedCount = 0;\n\n      for (const discussionId in this.discussions) {\n        const discussion = this.discussions[discussionId];\n\n        if (discussion.isResolved()) {\n          resolvedCount += 1;\n        }\n      }\n\n      return resolvedCount;\n    },\n    unresolvedDiscussionCount: function () {\n      let unresolvedCount = 0;\n\n      for (const discussionId in this.discussions) {\n        const discussion = this.discussions[discussionId];\n\n        if (!discussion.isResolved()) {\n          unresolvedCount += 1;\n        }\n      }\n\n      return unresolvedCount;\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/mixins/discussion.js","/* eslint-disable space-before-function-paren, camelcase, guard-for-in, no-restricted-syntax, no-unused-vars, max-len */\n/* global NoteModel */\n\nimport Vue from 'vue';\n\nclass DiscussionModel {\n  constructor (discussionId) {\n    this.id = discussionId;\n    this.notes = {};\n    this.loading = false;\n    this.canResolve = false;\n  }\n\n  createNote (noteObj) {\n    Vue.set(this.notes, noteObj.noteId, new NoteModel(this.id, noteObj));\n  }\n\n  deleteNote (noteId) {\n    Vue.delete(this.notes, noteId);\n  }\n\n  getNote (noteId) {\n    return this.notes[noteId];\n  }\n\n  notesCount() {\n    return Object.keys(this.notes).length;\n  }\n\n  isResolved () {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (!note.resolved) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  resolveAllNotes (resolved_by) {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (!note.resolved) {\n        note.resolved = true;\n        note.resolved_by = resolved_by;\n      }\n    }\n  }\n\n  unResolveAllNotes () {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (note.resolved) {\n        note.resolved = false;\n        note.resolved_by = null;\n      }\n    }\n  }\n\n  updateHeadline (data) {\n    const discussionSelector = `.discussion[data-discussion-id=\"${this.id}\"]`;\n    const $discussionHeadline = $(`${discussionSelector} .js-discussion-headline`);\n\n    if (data.discussion_headline_html) {\n      if ($discussionHeadline.length) {\n        $discussionHeadline.replaceWith(data.discussion_headline_html);\n      } else {\n        $(`${discussionSelector} .discussion-header`).append(data.discussion_headline_html);\n      }\n\n      gl.utils.localTimeAgo($('.js-timeago', `${discussionSelector}`));\n    } else {\n      $discussionHeadline.remove();\n    }\n  }\n\n  isResolvable () {\n    if (!this.canResolve) {\n      return false;\n    }\n\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (note.canResolve) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\nwindow.DiscussionModel = DiscussionModel;\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/models/discussion.js","/* eslint-disable camelcase, no-unused-vars */\n\nclass NoteModel {\n  constructor(discussionId, noteObj) {\n    this.discussionId = discussionId;\n    this.id = noteObj.noteId;\n    this.canResolve = noteObj.canResolve;\n    this.resolved = noteObj.resolved;\n    this.resolved_by = noteObj.resolvedBy;\n    this.authorName = noteObj.authorName;\n    this.authorAvatar = noteObj.authorAvatar;\n    this.noteTruncated = noteObj.noteTruncated;\n  }\n}\n\nwindow.NoteModel = NoteModel;\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/models/note.js","/* eslint-disable class-methods-use-this, one-var, camelcase, no-new, comma-dangle, no-param-reassign, max-len */\n/* global Flash */\n/* global CommentsStore */\n\nimport Vue from 'vue';\nimport '../../vue_shared/vue_resource_interceptor';\n\nwindow.gl = window.gl || {};\n\nclass ResolveServiceClass {\n  constructor(root) {\n    this.noteResource = Vue.resource(`${root}/notes{/noteId}/resolve`);\n    this.discussionResource = Vue.resource(`${root}/merge_requests{/mergeRequestId}/discussions{/discussionId}/resolve`);\n  }\n\n  resolve(noteId) {\n    return this.noteResource.save({ noteId }, {});\n  }\n\n  unresolve(noteId) {\n    return this.noteResource.delete({ noteId }, {});\n  }\n\n  toggleResolveForDiscussion(mergeRequestId, discussionId) {\n    const discussion = CommentsStore.state[discussionId];\n    const isResolved = discussion.isResolved();\n    let promise;\n\n    if (isResolved) {\n      promise = this.unResolveAll(mergeRequestId, discussionId);\n    } else {\n      promise = this.resolveAll(mergeRequestId, discussionId);\n    }\n\n    promise.then((response) => {\n      discussion.loading = false;\n\n      if (response.status === 200) {\n        const data = response.json();\n        const resolved_by = data ? data.resolved_by : null;\n\n        if (isResolved) {\n          discussion.unResolveAllNotes();\n        } else {\n          discussion.resolveAllNotes(resolved_by);\n        }\n\n        gl.mrWidget.checkStatus();\n        discussion.updateHeadline(data);\n      } else {\n        throw new Error('An error occurred when trying to resolve discussion.');\n      }\n    }).catch(() => {\n      new Flash('An error occurred when trying to resolve a discussion. Please try again.');\n    });\n  }\n\n  resolveAll(mergeRequestId, discussionId) {\n    const discussion = CommentsStore.state[discussionId];\n\n    discussion.loading = true;\n\n    return this.discussionResource.save({\n      mergeRequestId,\n      discussionId\n    }, {});\n  }\n\n  unResolveAll(mergeRequestId, discussionId) {\n    const discussion = CommentsStore.state[discussionId];\n\n    discussion.loading = true;\n\n    return this.discussionResource.delete({\n      mergeRequestId,\n      discussionId\n    }, {});\n  }\n}\n\ngl.DiffNotesResolveServiceClass = ResolveServiceClass;\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/services/resolve.js","/* eslint-disable object-shorthand, func-names, camelcase, no-restricted-syntax, guard-for-in, comma-dangle, max-len, no-param-reassign */\n/* global DiscussionModel */\n\nimport Vue from 'vue';\n\nwindow.CommentsStore = {\n  state: {},\n  get: function (discussionId, noteId) {\n    return this.state[discussionId].getNote(noteId);\n  },\n  createDiscussion: function (discussionId, canResolve) {\n    let discussion = this.state[discussionId];\n    if (!this.state[discussionId]) {\n      discussion = new DiscussionModel(discussionId);\n      Vue.set(this.state, discussionId, discussion);\n    }\n\n    if (canResolve !== undefined) {\n      discussion.canResolve = canResolve;\n    }\n\n    return discussion;\n  },\n  create: function (noteObj) {\n    const discussion = this.createDiscussion(noteObj.discussionId);\n\n    discussion.createNote(noteObj);\n  },\n  update: function (discussionId, noteId, resolved, resolved_by) {\n    const discussion = this.state[discussionId];\n    const note = discussion.getNote(noteId);\n    note.resolved = resolved;\n    note.resolved_by = resolved_by;\n  },\n  delete: function (discussionId, noteId) {\n    const discussion = this.state[discussionId];\n    discussion.deleteNote(noteId);\n\n    if (discussion.notesCount() === 0) {\n      Vue.delete(this.state, discussionId);\n    }\n  },\n  unresolvedDiscussionIds: function () {\n    const ids = [];\n\n    for (const discussionId in this.state) {\n      const discussion = this.state[discussionId];\n\n      if (!discussion.isResolved()) {\n        ids.push(discussion.id);\n      }\n    }\n\n    return ids;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/stores/comments.js"],"sourceRoot":""}