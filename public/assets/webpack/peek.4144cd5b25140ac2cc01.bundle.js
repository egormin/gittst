webpackJsonp(["peek"],{"../../../vendor/assets/javascripts/peek.js":function(t,e,n){(function(t){!function(t){var e,n,r,i,a;n=function(){return t("#peek").data("request-id")},r=function(){return t("#peek").length},a=function(e){var r,i,a,o,s,d;return Object.keys(e.data).forEach(function(n){Object.keys(e.data[n]).forEach(function(u){if(r=e.data[n][u],"queries"==u){i=document.createElement("table");for(var p=0;p<r.length;p+=1)a=document.createElement("tr"),o=document.createElement("td"),s=document.createElement("td"),d=document.createElement("strong"),d.append(r[p].duration+"ms"),o.appendChild(d),a.appendChild(o),s.appendChild(document.createTextNode(r[p].sql)),a.appendChild(s),i.appendChild(a);i.className="table",t("[data-defer-to="+n+"-"+u+"]").html(i)}else t("[data-defer-to="+n+"-"+u+"]").text(e.data[n][u])})}),t(document).trigger("peek:render",[n(),e])},i=function(e){var n;if(!t(e.target).is(":input"))return 96!==e.which||e.metaKey?void 0:(n=t("#peek"),n.hasClass("disabled")?(n.removeClass("disabled"),document.cookie="peek=true; path=/"):(n.addClass("disabled"),document.cookie="peek=false; path=/"))},e=function(){return t.ajax("/-/peek/results",{data:{request_id:n()},success:function(t,e,n){return a(t)},error:function(t,e,n){}})},t(document).on("keypress",i),t(document).on("peek:update",e),t(function(){if(r())return t(this).trigger("peek:update")})}(t)}).call(e,n("../../../node_modules/jquery/dist/jquery.js"))},"../../../vendor/assets/javascripts/peek.performance_bar.js":function(t,e,n){(function(t){var e,n,r,i;e=function(){function e(e){var n,r;null==e&&(e={}),this.el=t("#peek-view-performance-bar .performance-bar");for(n in e)r=e[n],this[n]=r;null==this.width&&(this.width=this.el.width()),null==this.timing&&(this.timing=window.performance.timing)}return e.prototype.appInfo=null,e.prototype.width=null,e.formatTime=function(t){return t>=1e3?(t/1e3).toFixed(3)+"s":t.toFixed(0)+"ms"},e.prototype.render=function(t){var e,n;return null==t&&(t=0),this.el.empty(),this.addBar("frontend","#90d35b","domLoading","domInteractive"),n=this.timing.responseEnd-this.timing.requestStart,t&&t<=n?(e=n-t,this.addBar("latency / receiving","#f1faff",this.timing.requestStart+t,this.timing.requestStart+t+e),this.addBar("app","#90afcf",this.timing.requestStart,this.timing.requestStart+t,this.appInfo)):this.addBar("backend","#c1d7ee","requestStart","responseEnd"),this.addBar("tcp / ssl","#45688e","connectStart","connectEnd"),this.addBar("redirect","#0c365e","redirectStart","redirectEnd"),this.addBar("dns","#082541","domainLookupStart","domainLookupEnd"),this.el},e.prototype.isLoaded=function(){return this.timing.domInteractive},e.prototype.start=function(){return this.timing.navigationStart},e.prototype.end=function(){return this.timing.domInteractive},e.prototype.total=function(){return this.end()-this.start()},e.prototype.addBar=function(n,r,i,a,o){var s,d,u,p,c,l;if("string"==typeof i&&(i=this.timing[i]),"string"==typeof a&&(a=this.timing[a]),null!=i&&null!=a)return p=a-i,u=i-this.start(),d=this.mapH(u),l=this.mapH(p),c=n+": "+e.formatTime(p),s=t("<li></li>",{"data-title":c,"data-toggle":"tooltip","data-container":"body"}),s.css({width:l+"px",left:d+"px",background:r}),this.el.append(s)},e.prototype.mapH=function(t){return t*(this.width/this.total())},e}(),r=function(){var n,r,a,o;return r=t("#peek-server_response_time"),o=Math.round(1e3*r.data("time")),n=new e,n.render(o),a=t("<span>",{"data-toggle":"tooltip","data-title":"Total navigation time for this page.","data-container":"body"}).text(e.formatTime(n.total())),i(a)},i=function(e){return t("#serverstats").html(e)},n=null,t(document).on("pjax:start page:fetch turbolinks:request-start",function(t){return n=t.timeStamp}),t(document).on("pjax:end page:load turbolinks:load",function(r,a){var o,s,d;if(null!=n)return o=r.timeStamp,d=o-n,s=a?parseInt(a.getResponseHeader("X-Runtime")):0,setTimeout(function(){var r,a,u,p;return a=(new Date).getTime(),r=new e({timing:{requestStart:n,responseEnd:o,domLoading:o,domInteractive:a},isLoaded:function(){return!0},start:function(){return n},end:function(){return a}}),r.render(s),p=null!=t.fn.pjax?"PJAX":"Turbolinks",u=t("<span>",{"data-toggle":"tooltip","data-title":p+" navigation time","data-container":"body"}).text(e.formatTime(d)),i(u),n=null},0)}),t(function(){return window.performance?r():t("#peek-view-performance-bar").remove()})}).call(e,n("../../../node_modules/jquery/dist/jquery.js"))},"./peek.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n("../../../vendor/assets/javascripts/peek.js"),r=(n.n(e),n("../../../vendor/assets/javascripts/peek.performance_bar.js"));n.n(r);t(document).on("click","#peek-show-queries",function(e){e.preventDefault(),t(".peek-rblineprof-modal").hide();var n=t("#modal-peek-pg-queries");n.length&&n.modal("toggle")}),t(document).on("click",".js-lineprof-file",function(e){e.preventDefault(),t(e.target).parents(".peek-rblineprof-file").find(".data").toggle()})}.call(e,n("../../../node_modules/jquery/dist/jquery.js"))}},["./peek.js"]);
//# sourceMappingURL=peek.4144cd5b25140ac2cc01.bundle.js.map