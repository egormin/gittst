webpackJsonp(["integrations"],{"./integrations/index.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n("./integrations/integration_settings_form.js");t(function(){new e.a(".js-integration-settings-form").init()})}.call(e,n("../../../node_modules/jquery/dist/jquery.js"))},"./integrations/integration_settings_form.js":function(t,e,n){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function e(i){n(this,e),this.$form=t(i),this.canTestService=this.$form.data("can-test"),this.testEndPoint=this.$form.data("test-url"),this.$serviceToggle=this.$form.find("#service_active"),this.$submitBtn=this.$form.find('button[type="submit"]'),this.$submitBtnLoader=this.$submitBtn.find(".js-btn-spinner"),this.$submitBtnLabel=this.$submitBtn.find(".js-btn-label")}return i(e,[{key:"init",value:function(){var t=this;this.toggleServiceState(this.$serviceToggle.is(":checked")),this.$serviceToggle.on("change",function(e){return t.handleServiceToggle(e)}),this.$submitBtn.on("click",function(e){return t.handleSettingsSave(e)})}},{key:"handleSettingsSave",value:function(t){this.$serviceToggle.is(":checked")&&this.$form.get(0).checkValidity()&&this.canTestService&&(t.preventDefault(),this.testSettings(this.$form.serialize()))}},{key:"handleServiceToggle",value:function(e){this.toggleServiceState(t(e.currentTarget).is(":checked"))}},{key:"toggleServiceState",value:function(t){this.toggleSubmitBtnLabel(t),t?this.$form.removeAttr("novalidate"):this.$form.attr("novalidate")||this.$form.attr("novalidate","novalidate")}},{key:"toggleSubmitBtnLabel",value:function(t){var e="Save changes";t&&this.canTestService&&(e="Test settings and save changes"),this.$submitBtnLabel.text(e)}},{key:"toggleSubmitBtnState",value:function(t){t?(this.$submitBtn.disable(),this.$submitBtnLoader.removeClass("hidden")):(this.$submitBtn.enable(),this.$submitBtnLoader.addClass("hidden"))}},{key:"testSettings",value:function(e){var n=this;this.toggleSubmitBtnState(!0),t.ajax({type:"PUT",url:this.testEndPoint,data:e}).done(function(t){t.error?new Flash(t.message,null,null,{title:"Save anyway",clickHandler:function(t){t.preventDefault(),n.$form.submit()}}):n.$form.submit()}).fail(function(){new Flash("Something went wrong on our end.")}).always(function(){n.toggleSubmitBtnState(!1)})}}]),e}();e.a=s}).call(e,n("../../../node_modules/jquery/dist/jquery.js"))}},["./integrations/index.js"]);
//# sourceMappingURL=integrations.81a5b362e2adcd49d8a5.bundle.js.map