{"version":3,"sources":["webpack:///schedule_form.9de5cf0fc3ea60961ae3.bundle.js","webpack:///./pipeline_schedules/components/interval_pattern_input.js","webpack:///./pipeline_schedules/components/target_branch_dropdown.js","webpack:///./pipeline_schedules/components/timezone_dropdown.js","webpack:///./pipeline_schedules/pipeline_schedule_form_bundle.js"],"names":["webpackJsonp","./pipeline_schedules/components/interval_pattern_input.js","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__vue_shared_translate__","use","props","initialCronInterval","type","String","required","default","data","inputNameAttribute","cronInterval","this","cronIntervalPresets","everyDay","everyWeek","everyMonth","cronSyntaxUrl","customInputEnabled","computed","intervalIsPreset","_","contains","isEditable","methods","toggleCustomInput","shouldEnable","created","enableCustomInput","watch","nextTick","gl","pipelineScheduleFieldErrors","updateFormValidityState","template","./pipeline_schedules/components/target_branch_dropdown.js","$","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","TargetBranchDropdown","$dropdown","$dropdownToggle","find","$input","initDefaultBranch","initDropdown","value","_this","glDropdown","formatBranchesList","filterable","selectable","toggleLabel","item","name","search","fields","clicked","cfg","updateInputValue","text","setDropdownToggle","map","val","initialValue","defaultBranch","_ref","selectedObj","e","preventDefault","call","./pipeline_schedules/components/timezone_dropdown.js","TimezoneDropdown","timezoneData","initDefaultTimezone","formatTimezone","offset","prefix","Math","abs","formatUtcOffset","identifier","./pipeline_schedules/pipeline_schedule_form_bundle.js","__WEBPACK_IMPORTED_MODULE_1__components_interval_pattern_input__","__WEBPACK_IMPORTED_MODULE_2__components_timezone_dropdown__","__WEBPACK_IMPORTED_MODULE_3__components_target_branch_dropdown__","document","addEventListener","IntervalPatternInputComponent","extend","intervalPatternMount","getElementById","propsData","dataset","initialInterval","$mount","formElement","timezoneDropdown","targetBranchDropdown","GlFieldErrors"],"mappings":"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","file":"schedule_form.9de5cf0fc3ea60961ae3.bundle.js","sourcesContent":["webpackJsonp([\"schedule_form\"],{\n\n/***/ \"./pipeline_schedules/components/interval_pattern_input.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vue_shared_translate__ = __webpack_require__(\"./vue_shared/translate.js\");\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1__vue_shared_translate__[\"a\" /* default */]);\n\nvar inputNameAttribute = 'schedule[cron]';\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    initialCronInterval: {\n      type: String,\n      required: false,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      inputNameAttribute: inputNameAttribute,\n      cronInterval: this.initialCronInterval,\n      cronIntervalPresets: {\n        everyDay: '0 4 * * *',\n        everyWeek: '0 4 * * 0',\n        everyMonth: '0 4 1 * *'\n      },\n      cronSyntaxUrl: 'https://en.wikipedia.org/wiki/Cron',\n      customInputEnabled: false\n    };\n  },\n\n  computed: {\n    intervalIsPreset: function intervalIsPreset() {\n      return _.contains(this.cronIntervalPresets, this.cronInterval);\n    },\n\n    // The text input is editable when there's a custom interval, or when it's\n    // a preset interval and the user clicks the 'custom' radio button\n    isEditable: function isEditable() {\n      return !!(this.customInputEnabled || !this.intervalIsPreset);\n    }\n  },\n  methods: {\n    toggleCustomInput: function toggleCustomInput(shouldEnable) {\n      this.customInputEnabled = shouldEnable;\n\n      if (shouldEnable) {\n        // We need to change the value so other radios don't remain selected\n        // because the model (cronInterval) hasn't changed. The server trims it.\n        this.cronInterval = this.cronInterval + ' ';\n      }\n    }\n  },\n  created: function created() {\n    if (this.intervalIsPreset) {\n      this.enableCustomInput = false;\n    }\n  },\n\n  watch: {\n    cronInterval: function cronInterval() {\n      // updates field validation state when model changes, as\n      // glFieldError only updates on input.\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].nextTick(function () {\n        gl.pipelineScheduleFieldErrors.updateFormValidityState();\n      });\n    }\n  },\n  template: '\\n    <div class=\"interval-pattern-form-group\">\\n      <div class=\"cron-preset-radio-input\">\\n        <input\\n          id=\"custom\"\\n          class=\"label-light\"\\n          type=\"radio\"\\n          :name=\"inputNameAttribute\"\\n          :value=\"cronInterval\"\\n          :checked=\"isEditable\"\\n          @click=\"toggleCustomInput(true)\"\\n        />\\n\\n        <label for=\"custom\">\\n          {{ s__(\\'PipelineSheduleIntervalPattern|Custom\\') }}\\n        </label>\\n\\n        <span class=\"cron-syntax-link-wrap\">\\n          (<a :href=\"cronSyntaxUrl\" target=\"_blank\">{{ __(\\'Cron syntax\\') }}</a>)\\n        </span>\\n      </div>\\n\\n      <div class=\"cron-preset-radio-input\">\\n        <input\\n          id=\"every-day\"\\n          class=\"label-light\"\\n          type=\"radio\"\\n          v-model=\"cronInterval\"\\n          :name=\"inputNameAttribute\"\\n          :value=\"cronIntervalPresets.everyDay\"\\n          @click=\"toggleCustomInput(false)\"\\n        />\\n\\n        <label class=\"label-light\" for=\"every-day\">\\n          {{ __(\\'Every day (at 4:00am)\\') }}\\n        </label>\\n      </div>\\n\\n      <div class=\"cron-preset-radio-input\">\\n        <input\\n          id=\"every-week\"\\n          class=\"label-light\"\\n          type=\"radio\"\\n          v-model=\"cronInterval\"\\n          :name=\"inputNameAttribute\"\\n          :value=\"cronIntervalPresets.everyWeek\"\\n          @click=\"toggleCustomInput(false)\"\\n        />\\n\\n        <label class=\"label-light\" for=\"every-week\">\\n          {{ __(\\'Every week (Sundays at 4:00am)\\') }}\\n        </label>\\n      </div>\\n\\n      <div class=\"cron-preset-radio-input\">\\n        <input\\n          id=\"every-month\"\\n          class=\"label-light\"\\n          type=\"radio\"\\n          v-model=\"cronInterval\"\\n          :name=\"inputNameAttribute\"\\n          :value=\"cronIntervalPresets.everyMonth\"\\n          @click=\"toggleCustomInput(false)\"\\n        />\\n\\n        <label class=\"label-light\" for=\"every-month\">\\n          {{ __(\\'Every month (on the 1st at 4:00am)\\') }}\\n        </label>\\n      </div>\\n\\n      <div class=\"cron-interval-input-wrapper\">\\n        <input\\n          id=\"schedule_cron\"\\n          class=\"form-control inline cron-interval-input\"\\n          type=\"text\"\\n          :placeholder=\"__(\\'Define a custom pattern with cron syntax\\')\"\\n          required=\"true\"\\n          v-model=\"cronInterval\"\\n          :name=\"inputNameAttribute\"\\n          :disabled=\"!isEditable\"\\n        />\\n      </div>\\n    </div>\\n  '\n});\n\n/***/ }),\n\n/***/ \"./pipeline_schedules/components/target_branch_dropdown.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TargetBranchDropdown = function () {\n  function TargetBranchDropdown() {\n    _classCallCheck(this, TargetBranchDropdown);\n\n    this.$dropdown = $('.js-target-branch-dropdown');\n    this.$dropdownToggle = this.$dropdown.find('.dropdown-toggle-text');\n    this.$input = $('#schedule_ref');\n    this.initDefaultBranch();\n    this.initDropdown();\n  }\n\n  _createClass(TargetBranchDropdown, [{\n    key: 'initDropdown',\n    value: function initDropdown() {\n      var _this = this;\n\n      this.$dropdown.glDropdown({\n        data: this.formatBranchesList(),\n        filterable: true,\n        selectable: true,\n        toggleLabel: function toggleLabel(item) {\n          return item.name;\n        },\n        search: {\n          fields: ['name']\n        },\n        clicked: function clicked(cfg) {\n          return _this.updateInputValue(cfg);\n        },\n        text: function text(item) {\n          return item.name;\n        }\n      });\n\n      this.setDropdownToggle();\n    }\n  }, {\n    key: 'formatBranchesList',\n    value: function formatBranchesList() {\n      return this.$dropdown.data('data').map(function (val) {\n        return { name: val };\n      });\n    }\n  }, {\n    key: 'setDropdownToggle',\n    value: function setDropdownToggle() {\n      var initialValue = this.$input.val();\n\n      this.$dropdownToggle.text(initialValue);\n    }\n  }, {\n    key: 'initDefaultBranch',\n    value: function initDefaultBranch() {\n      var initialValue = this.$input.val();\n      var defaultBranch = this.$dropdown.data('defaultBranch');\n\n      if (!initialValue) {\n        this.$input.val(defaultBranch);\n      }\n    }\n  }, {\n    key: 'updateInputValue',\n    value: function updateInputValue(_ref) {\n      var selectedObj = _ref.selectedObj,\n          e = _ref.e;\n\n      e.preventDefault();\n\n      this.$input.val(selectedObj.name);\n      gl.pipelineScheduleFieldErrors.updateFormValidityState();\n    }\n  }]);\n\n  return TargetBranchDropdown;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TargetBranchDropdown);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./pipeline_schedules/components/timezone_dropdown.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable class-methods-use-this */\n\nvar defaultTimezone = 'UTC';\n\nvar TimezoneDropdown = function () {\n  function TimezoneDropdown() {\n    _classCallCheck(this, TimezoneDropdown);\n\n    this.$dropdown = $('.js-timezone-dropdown');\n    this.$dropdownToggle = this.$dropdown.find('.dropdown-toggle-text');\n    this.$input = $('#schedule_cron_timezone');\n    this.timezoneData = this.$dropdown.data('data');\n    this.initDefaultTimezone();\n    this.initDropdown();\n  }\n\n  _createClass(TimezoneDropdown, [{\n    key: 'initDropdown',\n    value: function initDropdown() {\n      var _this = this;\n\n      this.$dropdown.glDropdown({\n        data: this.timezoneData,\n        filterable: true,\n        selectable: true,\n        toggleLabel: function toggleLabel(item) {\n          return item.name;\n        },\n        search: {\n          fields: ['name']\n        },\n        clicked: function clicked(cfg) {\n          return _this.updateInputValue(cfg);\n        },\n        text: function text(item) {\n          return _this.formatTimezone(item);\n        }\n      });\n\n      this.setDropdownToggle();\n    }\n  }, {\n    key: 'formatUtcOffset',\n    value: function formatUtcOffset(offset) {\n      var prefix = '';\n\n      if (offset > 0) {\n        prefix = '+';\n      } else if (offset < 0) {\n        prefix = '-';\n      }\n\n      return prefix + ' ' + Math.abs(offset / 3600);\n    }\n  }, {\n    key: 'formatTimezone',\n    value: function formatTimezone(item) {\n      return '[UTC ' + this.formatUtcOffset(item.offset) + '] ' + item.name;\n    }\n  }, {\n    key: 'initDefaultTimezone',\n    value: function initDefaultTimezone() {\n      var initialValue = this.$input.val();\n\n      if (!initialValue) {\n        this.$input.val(defaultTimezone);\n      }\n    }\n  }, {\n    key: 'setDropdownToggle',\n    value: function setDropdownToggle() {\n      var initialValue = this.$input.val();\n\n      this.$dropdownToggle.text(initialValue);\n    }\n  }, {\n    key: 'updateInputValue',\n    value: function updateInputValue(_ref) {\n      var selectedObj = _ref.selectedObj,\n          e = _ref.e;\n\n      e.preventDefault();\n      this.$input.val(selectedObj.identifier);\n      gl.pipelineScheduleFieldErrors.updateFormValidityState();\n    }\n  }]);\n\n  return TimezoneDropdown;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TimezoneDropdown);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"../../../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./pipeline_schedules/pipeline_schedule_form_bundle.js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"../../../node_modules/vue/dist/vue.esm.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_interval_pattern_input__ = __webpack_require__(\"./pipeline_schedules/components/interval_pattern_input.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_timezone_dropdown__ = __webpack_require__(\"./pipeline_schedules/components/timezone_dropdown.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_target_branch_dropdown__ = __webpack_require__(\"./pipeline_schedules/components/target_branch_dropdown.js\");\n\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var IntervalPatternInputComponent = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend(__WEBPACK_IMPORTED_MODULE_1__components_interval_pattern_input__[\"a\" /* default */]);\n  var intervalPatternMount = document.getElementById('interval-pattern-input');\n  var initialCronInterval = intervalPatternMount ? intervalPatternMount.dataset.initialInterval : '';\n\n  new IntervalPatternInputComponent({\n    propsData: {\n      initialCronInterval: initialCronInterval\n    }\n  }).$mount(intervalPatternMount);\n\n  var formElement = document.getElementById('new-pipeline-schedule-form');\n  gl.timezoneDropdown = new __WEBPACK_IMPORTED_MODULE_2__components_timezone_dropdown__[\"a\" /* default */]();\n  gl.targetBranchDropdown = new __WEBPACK_IMPORTED_MODULE_3__components_target_branch_dropdown__[\"a\" /* default */]();\n  gl.pipelineScheduleFieldErrors = new gl.GlFieldErrors(formElement);\n});\n\n/***/ })\n\n},[\"./pipeline_schedules/pipeline_schedule_form_bundle.js\"]);\n\n\n// WEBPACK FOOTER //\n// schedule_form.9de5cf0fc3ea60961ae3.bundle.js","import Vue from 'vue';\nimport Translate from '../../vue_shared/translate';\n\nVue.use(Translate);\n\nconst inputNameAttribute = 'schedule[cron]';\n\nexport default {\n  props: {\n    initialCronInterval: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      inputNameAttribute,\n      cronInterval: this.initialCronInterval,\n      cronIntervalPresets: {\n        everyDay: '0 4 * * *',\n        everyWeek: '0 4 * * 0',\n        everyMonth: '0 4 1 * *',\n      },\n      cronSyntaxUrl: 'https://en.wikipedia.org/wiki/Cron',\n      customInputEnabled: false,\n    };\n  },\n  computed: {\n    intervalIsPreset() {\n      return _.contains(this.cronIntervalPresets, this.cronInterval);\n    },\n    // The text input is editable when there's a custom interval, or when it's\n    // a preset interval and the user clicks the 'custom' radio button\n    isEditable() {\n      return !!(this.customInputEnabled || !this.intervalIsPreset);\n    },\n  },\n  methods: {\n    toggleCustomInput(shouldEnable) {\n      this.customInputEnabled = shouldEnable;\n\n      if (shouldEnable) {\n        // We need to change the value so other radios don't remain selected\n        // because the model (cronInterval) hasn't changed. The server trims it.\n        this.cronInterval = `${this.cronInterval} `;\n      }\n    },\n  },\n  created() {\n    if (this.intervalIsPreset) {\n      this.enableCustomInput = false;\n    }\n  },\n  watch: {\n    cronInterval() {\n      // updates field validation state when model changes, as\n      // glFieldError only updates on input.\n      Vue.nextTick(() => {\n        gl.pipelineScheduleFieldErrors.updateFormValidityState();\n      });\n    },\n  },\n  template: `\n    <div class=\"interval-pattern-form-group\">\n      <div class=\"cron-preset-radio-input\">\n        <input\n          id=\"custom\"\n          class=\"label-light\"\n          type=\"radio\"\n          :name=\"inputNameAttribute\"\n          :value=\"cronInterval\"\n          :checked=\"isEditable\"\n          @click=\"toggleCustomInput(true)\"\n        />\n\n        <label for=\"custom\">\n          {{ s__('PipelineSheduleIntervalPattern|Custom') }}\n        </label>\n\n        <span class=\"cron-syntax-link-wrap\">\n          (<a :href=\"cronSyntaxUrl\" target=\"_blank\">{{ __('Cron syntax') }}</a>)\n        </span>\n      </div>\n\n      <div class=\"cron-preset-radio-input\">\n        <input\n          id=\"every-day\"\n          class=\"label-light\"\n          type=\"radio\"\n          v-model=\"cronInterval\"\n          :name=\"inputNameAttribute\"\n          :value=\"cronIntervalPresets.everyDay\"\n          @click=\"toggleCustomInput(false)\"\n        />\n\n        <label class=\"label-light\" for=\"every-day\">\n          {{ __('Every day (at 4:00am)') }}\n        </label>\n      </div>\n\n      <div class=\"cron-preset-radio-input\">\n        <input\n          id=\"every-week\"\n          class=\"label-light\"\n          type=\"radio\"\n          v-model=\"cronInterval\"\n          :name=\"inputNameAttribute\"\n          :value=\"cronIntervalPresets.everyWeek\"\n          @click=\"toggleCustomInput(false)\"\n        />\n\n        <label class=\"label-light\" for=\"every-week\">\n          {{ __('Every week (Sundays at 4:00am)') }}\n        </label>\n      </div>\n\n      <div class=\"cron-preset-radio-input\">\n        <input\n          id=\"every-month\"\n          class=\"label-light\"\n          type=\"radio\"\n          v-model=\"cronInterval\"\n          :name=\"inputNameAttribute\"\n          :value=\"cronIntervalPresets.everyMonth\"\n          @click=\"toggleCustomInput(false)\"\n        />\n\n        <label class=\"label-light\" for=\"every-month\">\n          {{ __('Every month (on the 1st at 4:00am)') }}\n        </label>\n      </div>\n\n      <div class=\"cron-interval-input-wrapper\">\n        <input\n          id=\"schedule_cron\"\n          class=\"form-control inline cron-interval-input\"\n          type=\"text\"\n          :placeholder=\"__('Define a custom pattern with cron syntax')\"\n          required=\"true\"\n          v-model=\"cronInterval\"\n          :name=\"inputNameAttribute\"\n          :disabled=\"!isEditable\"\n        />\n      </div>\n    </div>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./pipeline_schedules/components/interval_pattern_input.js","export default class TargetBranchDropdown {\n  constructor() {\n    this.$dropdown = $('.js-target-branch-dropdown');\n    this.$dropdownToggle = this.$dropdown.find('.dropdown-toggle-text');\n    this.$input = $('#schedule_ref');\n    this.initDefaultBranch();\n    this.initDropdown();\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.formatBranchesList(),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: cfg => this.updateInputValue(cfg),\n      text: item => item.name,\n    });\n\n    this.setDropdownToggle();\n  }\n\n  formatBranchesList() {\n    return this.$dropdown.data('data')\n      .map(val => ({ name: val }));\n  }\n\n  setDropdownToggle() {\n    const initialValue = this.$input.val();\n\n    this.$dropdownToggle.text(initialValue);\n  }\n\n  initDefaultBranch() {\n    const initialValue = this.$input.val();\n    const defaultBranch = this.$dropdown.data('defaultBranch');\n\n    if (!initialValue) {\n      this.$input.val(defaultBranch);\n    }\n  }\n\n  updateInputValue({ selectedObj, e }) {\n    e.preventDefault();\n\n    this.$input.val(selectedObj.name);\n    gl.pipelineScheduleFieldErrors.updateFormValidityState();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pipeline_schedules/components/target_branch_dropdown.js","/* eslint-disable class-methods-use-this */\n\nconst defaultTimezone = 'UTC';\n\nexport default class TimezoneDropdown {\n  constructor() {\n    this.$dropdown = $('.js-timezone-dropdown');\n    this.$dropdownToggle = this.$dropdown.find('.dropdown-toggle-text');\n    this.$input = $('#schedule_cron_timezone');\n    this.timezoneData = this.$dropdown.data('data');\n    this.initDefaultTimezone();\n    this.initDropdown();\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.timezoneData,\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: cfg => this.updateInputValue(cfg),\n      text: item => this.formatTimezone(item),\n    });\n\n    this.setDropdownToggle();\n  }\n\n  formatUtcOffset(offset) {\n    let prefix = '';\n\n    if (offset > 0) {\n      prefix = '+';\n    } else if (offset < 0) {\n      prefix = '-';\n    }\n\n    return `${prefix} ${Math.abs(offset / 3600)}`;\n  }\n\n  formatTimezone(item) {\n    return `[UTC ${this.formatUtcOffset(item.offset)}] ${item.name}`;\n  }\n\n  initDefaultTimezone() {\n    const initialValue = this.$input.val();\n\n    if (!initialValue) {\n      this.$input.val(defaultTimezone);\n    }\n  }\n\n  setDropdownToggle() {\n    const initialValue = this.$input.val();\n\n    this.$dropdownToggle.text(initialValue);\n  }\n\n  updateInputValue({ selectedObj, e }) {\n    e.preventDefault();\n    this.$input.val(selectedObj.identifier);\n    gl.pipelineScheduleFieldErrors.updateFormValidityState();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pipeline_schedules/components/timezone_dropdown.js","import Vue from 'vue';\nimport IntervalPatternInput from './components/interval_pattern_input';\nimport TimezoneDropdown from './components/timezone_dropdown';\nimport TargetBranchDropdown from './components/target_branch_dropdown';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const IntervalPatternInputComponent = Vue.extend(IntervalPatternInput);\n  const intervalPatternMount = document.getElementById('interval-pattern-input');\n  const initialCronInterval = intervalPatternMount ? intervalPatternMount.dataset.initialInterval : '';\n\n  new IntervalPatternInputComponent({\n    propsData: {\n      initialCronInterval,\n    },\n  }).$mount(intervalPatternMount);\n\n  const formElement = document.getElementById('new-pipeline-schedule-form');\n  gl.timezoneDropdown = new TimezoneDropdown();\n  gl.targetBranchDropdown = new TargetBranchDropdown();\n  gl.pipelineScheduleFieldErrors = new gl.GlFieldErrors(formElement);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./pipeline_schedules/pipeline_schedule_form_bundle.js"],"sourceRoot":""}